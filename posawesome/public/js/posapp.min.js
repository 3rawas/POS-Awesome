!function(){"use strict";var e=new Vue,t={data:function(){return{drawer:!0,mini:!0,item:0,items:[{text:"Dashboard",icon:"mdi-view-dashboard"},{text:"POS",icon:"mdi-point-of-sale"},{text:"Customer",icon:"mdi-account-box-multiple"},{text:"Closing",icon:"mdi-folder-open"}],page:"",fav:!0,menu:!1,message:!1,hints:!0,menu_item:0,snack:!1,snackColor:"",snackText:"",company:"POS Awesome",company_img:"/assets/erpnext/images/erp-icon.svg"}},methods:{changePage:function(e){this.$emit("changePage",e)},go_to:function(){frappe.set_route("workspace","home"),location.reload()},close_shift_dialog:function(){e.$emit("open_closing_dialog")},show_mesage:function(e){this.snack=!0,this.snackColor=e.color,this.snackText=e.text}},created:function(){this.$nextTick(function(){var t=this;e.$on("show_mesage",function(e){t.show_mesage(e)}),e.$on("set_company",function(e){t.company=e.name,t.company_img=e.company_logo?e.company_logo:t.company_img})})}},n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",[n("v-app-bar",{staticClass:"elevation-2",attrs:{app:"",height:"40"}},[n("v-app-bar-nav-icon",{staticClass:"grey--text",on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}}),e._v(" "),n("v-toolbar-title",{staticClass:"text-uppercase indigo--text"},[n("span",{staticClass:"font-weight-light"},[e._v("pos")]),e._v(" "),n("span",[e._v("awesome")])]),e._v(" "),n("v-spacer"),e._v(" "),n("div",{staticClass:"text-center"},[n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,i=t.attrs;return[n("v-btn",e._g(e._b({attrs:{color:"grey",dark:"",text:""}},"v-btn",i,!1),o),[e._v("Menu")])]}}])},[e._v(" "),n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300",tile:""}},[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{attrs:{color:"primary"},model:{value:e.menu_item,callback:function(t){e.menu_item=t},expression:"menu_item"}},[n("v-list-item",{on:{click:e.close_shift_dialog}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-folder-open")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Close Shift")])],1)],1)],1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"text-center"},[n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,i=t.attrs;return[n("v-btn",e._g(e._b({attrs:{color:"grey",dark:"",text:""}},"v-btn",i,!1),o),[e._v("Pages")])]}}])},[e._v(" "),n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300",tile:""}},[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{attrs:{color:"primary"},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}},e._l(e.items,function(t,o){return n("v-list-item",{key:t.text,on:{click:function(n){e.changePage(t.text),t=o}}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:e._s(t.icon)}})],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.text)}})],1)],1)}),1)],1)],1)],1)],1),e._v(" "),n("v-btn",{attrs:{text:"",color:"grey"},on:{click:e.go_to}},[n("span",{attrs:{right:""}},[e._v("Erpnext")])])],1),e._v(" "),n("v-navigation-drawer",{staticClass:"indigo margen-top",attrs:{"mini-variant":e.mini,app:""},on:{"update:miniVariant":function(t){e.mini=t},"update:mini-variant":function(t){e.mini=t}},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{dark:""}},[n("v-list-item",{staticClass:"px-2"},[n("v-list-item-avatar",[n("v-img",{attrs:{src:e.company_img}})],1),e._v(" "),n("v-list-item-title",[e._v(e._s(e.company))]),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}},[n("v-icon",[e._v("mdi-chevron-left")])],1)],1),e._v(" "),n("v-list-item-group",{attrs:{color:"white"},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}},e._l(e.items,function(t){return n("v-list-item",{key:t.text,on:{click:function(n){return e.changePage(t.text)}}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:e._s(t.icon)}})],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.text)}})],1)],1)}),1)],1)],1),e._v(" "),n("v-snackbar",{attrs:{timeout:5e3,color:e.snackColor,top:"",right:""},model:{value:e.snack,callback:function(t){e.snack=t},expression:"snack"}},[e._v("\n    "+e._s(e.snackText)+"\n    ")])],1)};n._withStripped=!0;var o=function(e,t,n,o,i,a,s,c){var r,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/Navbar.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=o,t&&(r=function(e){t.call(this,s(e))}),void 0!==r)if(l.functional){var d=l.render;l.render=function(e,t){return r.call(t),d(e,t)}}else{var m=l.beforeCreate;l.beforeCreate=m?[].concat(m,r):[r]}return l}({render:n,staticRenderFns:[]},function(e){e&&e("data-v-539c6e4c_0",{source:"\n.margen-top[data-v-539c6e4c] {\n  margin-top: 0px;\n}\n",map:{version:3,sources:["/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/Navbar.vue"],names:[],mappings:";AA2KA;EACA,eAAA;AACA",file:"Navbar.vue",sourcesContent:['<template>\n  <nav>\n    <v-app-bar app height="40" class="elevation-2">\n      <v-app-bar-nav-icon\n        @click.stop="mini = !mini"\n        class="grey--text"\n      ></v-app-bar-nav-icon>\n      <v-toolbar-title class="text-uppercase indigo--text">\n        <span class="font-weight-light">pos</span>\n        <span>awesome</span>\n      </v-toolbar-title>\n\n      <v-spacer></v-spacer>\n\n      <div class="text-center">\n        <v-menu offset-y>\n          <template v-slot:activator="{ on, attrs }">\n            <v-btn color="grey" dark text v-bind="attrs" v-on="on">Menu</v-btn>\n          </template>\n          <v-card class="mx-auto" max-width="300" tile>\n            <v-list dense>\n              <v-list-item-group v-model="menu_item" color="primary">\n                <v-list-item @click="close_shift_dialog">\n                  <v-list-item-icon>\n                    <v-icon>mdi-folder-open</v-icon>\n                  </v-list-item-icon>\n                  <v-list-item-content>\n                    <v-list-item-title>Close Shift</v-list-item-title>\n                  </v-list-item-content>\n                </v-list-item>\n              </v-list-item-group>\n            </v-list>\n          </v-card>\n        </v-menu>\n      </div>\n\n      <div class="text-center">\n        <v-menu offset-y>\n          <template v-slot:activator="{ on, attrs }">\n            <v-btn color="grey" dark text v-bind="attrs" v-on="on">Pages</v-btn>\n          </template>\n          <v-card class="mx-auto" max-width="300" tile>\n            <v-list dense>\n              <v-list-item-group v-model="item" color="primary">\n                <v-list-item\n                  v-for="(item, index) in items"\n                  :key="item.text"\n                  @click="[changePage(item.text), (item = index)]"\n                >\n                  <v-list-item-icon>\n                    <v-icon v-text="item.icon"></v-icon>\n                  </v-list-item-icon>\n                  <v-list-item-content>\n                    <v-list-item-title v-text="item.text"></v-list-item-title>\n                  </v-list-item-content>\n                </v-list-item>\n              </v-list-item-group>\n            </v-list>\n          </v-card>\n        </v-menu>\n      </div>\n      <v-btn text color="grey" @click="go_to">\n        <span right>Erpnext</span>\n      </v-btn>\n    </v-app-bar>\n    <v-navigation-drawer\n      v-model="drawer"\n      :mini-variant.sync="mini"\n      app\n      class="indigo margen-top"\n    >\n      <v-list dark>\n        <v-list-item class="px-2">\n          <v-list-item-avatar>\n            <v-img :src="company_img"></v-img>\n          </v-list-item-avatar>\n\n          <v-list-item-title>{{ company }}</v-list-item-title>\n\n          <v-btn icon @click.stop="mini = !mini">\n            <v-icon>mdi-chevron-left</v-icon>\n          </v-btn>\n        </v-list-item>\n        \x3c!-- <MyPopup/> --\x3e\n        <v-list-item-group v-model="item" color="white">\n          <v-list-item\n            v-for="item in items"\n            :key="item.text"\n            @click="changePage(item.text)"\n          >\n            <v-list-item-icon>\n              <v-icon v-text="item.icon"></v-icon>\n            </v-list-item-icon>\n            <v-list-item-content>\n              <v-list-item-title v-text="item.text"></v-list-item-title>\n            </v-list-item-content>\n          </v-list-item>\n        </v-list-item-group>\n      </v-list>\n    </v-navigation-drawer>\n    <v-snackbar v-model="snack" :timeout="5000" :color="snackColor" top right >\n      {{ snackText }}\n      \x3c!-- <template v-slot:action="{ attrs }"> --\x3e\n        \x3c!-- <v-btn v-bind="attrs" text @click="snack = false">Close</v-btn> --\x3e\n      \x3c!-- </template> --\x3e\n    </v-snackbar>\n  </nav>\n</template>\n\n<script>\nimport { evntBus } from "../bus";\n\nexport default {\n  // components: {MyPopup},\n  data() {\n    return {\n      drawer: true,\n      mini: true,\n      item: 0,\n      items: [\n        { text: "Dashboard", icon: "mdi-view-dashboard" },\n        { text: "POS", icon: "mdi-point-of-sale" },\n        { text: "Customer", icon: "mdi-account-box-multiple" },\n        { text: "Closing", icon: "mdi-folder-open" },\n      ],\n      page: "",\n      fav: true,\n      menu: false,\n      message: false,\n      hints: true,\n      menu_item: 0,\n      snack: false,\n      snackColor: "",\n      snackText: "",\n      company: "POS Awesome",\n      company_img: "/assets/erpnext/images/erp-icon.svg",\n    };\n  },\n  methods: {\n    changePage(key) {\n      this.$emit("changePage", key);\n    },\n    go_to() {\n      frappe.set_route("workspace", "home");\n      location.reload();\n    },\n    close_shift_dialog() {\n      evntBus.$emit("open_closing_dialog");\n    },\n    show_mesage(data) {\n      this.snack = true;\n      this.snackColor = data.color;\n      this.snackText = data.text;\n    },\n  },\n  created: function () {\n    this.$nextTick(function () {\n      evntBus.$on("show_mesage", (data) => {\n        this.show_mesage(data);\n      });\n      evntBus.$on("set_company", (data) => {\n        this.company = data.name;\n        this.company_img = data.company_logo ? data.company_logo :this.company_img ;\n      });\n    });\n    \n  },\n};\n<\/script>\n\n<style scoped>\n.margen-top {\n  margin-top: 0px;\n}\n</style>']},media:void 0})},t,"data-v-539c6e4c",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var a=o?i.media||"default":e,s=n[a]||(n[a]={ids:[],parts:[],element:void 0});if(!s.ids.includes(e)){var c=i.source,r=s.ids.length;if(s.ids.push(e),o&&(s.element=s.element||document.querySelector("style[data-group="+a+"]")),!s.element){var l=s.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),o&&(l.setAttribute("data-group",a),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(o&&(r=parseInt(s.element.getAttribute("data-next-index")),s.element.setAttribute("data-next-index",r+1)),s.element.styleSheet)s.parts.push(c),s.element.styleSheet.cssText=s.parts.filter(Boolean).join("\n");else{var d=document.createTextNode(c),m=s.element.childNodes;m[r]&&s.element.removeChild(m[r]),m.length?s.element.insertBefore(d,m[r]):s.element.appendChild(d)}}}}}),i={data:function(){return{pos_profile:"",items_view:"list",item_group:"ALL",favourites_view:!1,loading:!1,items_group:["ALL"],items:[],search:"",itemsPerPage:1e3,items_headers:[{text:"Name",align:"start",sortable:!0,value:"item_name"},{text:"Rate",value:"rate",align:"start"},{text:"Currency",value:"currency",align:"start"},{text:"Available QTY",value:"actual_qty",align:"start"},{text:"UOM",value:"stock_uom",align:"start"}]}},watch:{filtred_items:function(e){this.update_items_details(e)}},methods:{get_items:function(){if(this.pos_profile){var e=this;this.loading=!0,localStorage.items_storage&&(e.items=JSON.parse(localStorage.getItem("items_storage")),e.loading=!1),frappe.call({method:"posawesome.posawesome.api.posapp.get_items",args:{pos_profile:e.pos_profile},callback:function(t){t.message&&(localStorage.setItem("items_storage",""),localStorage.setItem("items_storage",JSON.stringify(t.message)),e.$nextTick(function(){console.log("loadItmes"),e.items=JSON.parse(localStorage.getItem("items_storage")),e.loading=!1}))}})}else console.log("No POS Profile")},get_items_groups:function(){var e=this;if(this.pos_profile)if(this.pos_profile.item_groups.length>0)this.pos_profile.item_groups.forEach(function(t){"All Item Groups"!==t.item_group&&e.items_group.push(t.item_group)});else{var t=this;frappe.call({method:"posawesome.posawesome.api.posapp.get_items_groups",args:{},callback:function(e){e.message&&e.message.forEach(function(e){t.items_group.push(e.name)})}})}else console.log("No POS Profile")},add_item:function(t){e.$emit("add_item",t)},enter_event:function(){this.filtred_items.length&&this.search&&(this.add_item(this.filtred_items[0]),this.search=null)},esc_event:function(){this.search=null},update_items_details:function(e){frappe.call({method:"posawesome.posawesome.api.posapp.get_items_details",args:{pos_profile:this.pos_profile,items_data:e},callback:function(t){t.message&&e.forEach(function(e){var n=t.message.find(function(t){return t.item_code==e.item_code});e.actual_qty=n.actual_qty,e.serial_no_data=n.serial_no_data,e.batch_no_data=n.batch_no_data,e.uoms=n.uoms,e.rate=n.rate,e.currency=n.currency})}})},update_cur_items_details:function(){this.update_items_details(this.filtred_items)}},computed:{filtred_items:function(){var e=this,t=[],n=[];return n="ALL"!=this.item_group?this.items.filter(function(t){return t.item_group.toLowerCase().includes(e.item_group.toLowerCase())}):this.items,!this.search||this.search.length<3?n.slice(0,100):(this.search&&0==(t=n.filter(function(t){for(var n=!1,o=0,i=t.item_barcode;o<i.length;o+=1){if(i[o].barcode==e.search){n=!0;break}}return n})).length&&0==(t=n.filter(function(t){return t.item_name.toLowerCase().includes(e.search.toLowerCase())})).length&&(t=n.filter(function(t){return t.item_code.toLowerCase().includes(e.search.toLowerCase())})),t.slice(0,100))}},created:function(){var t=this;this.$nextTick(function(){}),e.$on("register_pos_profile",function(e){t.pos_profile=e.pos_profile,t.get_items(),t.get_items_groups()}),e.$on("update_cur_items_details",function(){t.update_cur_items_details()})},mounted:function(){}},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",{staticClass:"selection mx-auto grey lighten-5",staticStyle:{"max-height":"80vh",height:"80vh"}},[n("v-progress-linear",{attrs:{active:e.loading,indeterminate:e.loading,absolute:"",top:"",color:"deep-purple accent-4"}}),e._v(" "),n("v-row",{staticClass:"items px-2 py-1"},[n("v-col",{staticClass:"pb-0 mb-2",attrs:{cols:"12"}},[n("v-text-field",{attrs:{dense:"",clearable:"",autofocus:"",outlined:"",color:"indigo",label:"Serch Items",hint:"Search by item code, serial number, batch no or barcode","background-color":"white","hide-details":""},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter_event(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.esc_event(t)}]},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-col",{staticClass:"pt-0 mt-0",attrs:{cols:"12"}},["card"==e.items_view?n("div",{staticClass:"items",attrs:{fluid:""}},[n("v-row",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"68vh"},attrs:{dense:""}},e._l(e.filtred_items,function(t,o){return n("v-col",{key:o,attrs:{xl:"2",lg:"3",md:"6",sm:"6",cols:"6","min-height":"50"}},[n("v-card",{attrs:{hover:"hover"},on:{click:function(n){return e.add_item(t)}}},[n("v-img",{staticClass:"white--text align-end",attrs:{src:t.image||"https://lunawood.com/wp-content/uploads/2018/02/placeholder-image.png",gradient:"to bottom, rgba(0,0,0,.2), rgba(0,0,0,.7)",height:"100px"}},[n("v-card-text",{staticClass:"text-subtitle-2 px-1 pb-2",domProps:{textContent:e._s(t.item_name)}})],1),e._v(" "),n("v-card-text",{staticClass:"text--primary pa-1"},[n("div",{staticClass:"text-caption indigo--text accent-3"},[e._v("\n                    "+e._s(t.rate||0)+" "+e._s(t.currency||"")+"\n                  ")])])],1)],1)}),1)],1):e._e(),e._v(" "),"list"==e.items_view?n("div",{staticClass:"items",attrs:{fluid:""}},[n("div",{staticClass:"my-0 py-0 overflow-y-auto",staticStyle:{"max-height":"68vh"}},[[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.items_headers,items:e.filtred_items,"item-key":"item_code","items-per-page":e.itemsPerPage,"hide-default-footer":""},on:{"click:row":e.add_item}})]],2)]):e._e()])],1)],1),e._v(" "),n("v-card",{staticClass:"cards mb-0 mt-3 pa-2 grey lighten-5",staticStyle:{"max-height":"10vh",height:"10vh"}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("v-select",{attrs:{items:e.items_group,label:"Items Group",dense:"",outlined:"","hide-details":""},model:{value:e.item_group,callback:function(t){e.item_group=t},expression:"item_group"}})],1),e._v(" "),n("v-col",{staticClass:"mt-1",attrs:{cols:"8"}},[n("v-btn-toggle",{attrs:{color:"primary accent-3",group:"",dense:"",rounded:""},model:{value:e.items_view,callback:function(t){e.items_view=t},expression:"items_view"}},[n("v-btn",{attrs:{value:"card"}},[e._v("Card View")]),e._v(" "),n("v-btn",{attrs:{value:"list"}},[e._v("List View")])],1)],1),e._v(" "),n("v-col",{staticClass:"mt-1",attrs:{cols:"4"}},[n("v-btn-toggle",{attrs:{color:"success accent-3",group:"",dense:"",rounded:""},model:{value:e.favourites_view,callback:function(t){e.favourites_view=t},expression:"favourites_view"}},[n("v-btn",{attrs:{value:"True"}},[e._v("Favourites")])],1)],1)],1)],1)],1)};a._withStripped=!0;var s=function(e,t,n,o,i,a,s,c){var r,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/ItemsSelector.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=o,t&&(r=function(e){t.call(this,s(e))}),void 0!==r)if(l.functional){var d=l.render;l.render=function(e,t){return r.call(t),d(e,t)}}else{var m=l.beforeCreate;l.beforeCreate=m?[].concat(m,r):[r]}return l}({render:a,staticRenderFns:[]},function(e){e&&e("data-v-23f2e40c_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"ItemsSelector.vue"},media:void 0})},i,"data-v-23f2e40c",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var a=o?i.media||"default":e,s=n[a]||(n[a]={ids:[],parts:[],element:void 0});if(!s.ids.includes(e)){var c=i.source,r=s.ids.length;if(s.ids.push(e),o&&(s.element=s.element||document.querySelector("style[data-group="+a+"]")),!s.element){var l=s.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),o&&(l.setAttribute("data-group",a),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(o&&(r=parseInt(s.element.getAttribute("data-next-index")),s.element.setAttribute("data-next-index",r+1)),s.element.styleSheet)s.parts.push(c),s.element.styleSheet.cssText=s.parts.filter(Boolean).join("\n");else{var d=document.createTextNode(c),m=s.element.childNodes;m[r]&&s.element.removeChild(m[r]),m.length?s.element.insertBefore(d,m[r]):s.element.appendChild(d)}}}}}),c={data:function(){return{pos_profile:"",customers:[],customer:""}},methods:{get_customer_names:function(){var e=this;localStorage.customer_storage&&(e.customers=JSON.parse(localStorage.getItem("customer_storage"))),frappe.call({method:"posawesome.posawesome.api.posapp.get_customer_names",args:{},callback:function(t){t.message&&(localStorage.setItem("customer_storage",""),localStorage.setItem("customer_storage",JSON.stringify(t.message)),e.$nextTick(function(){console.log("loadCustomers"),e.customers=JSON.parse(localStorage.getItem("customer_storage"))}))}})}},computed:{},created:function(){this.$nextTick(function(){var t=this;e.$on("register_pos_profile",function(e){t.pos_profile=e,t.get_customer_names()}),e.$on("set_customer",function(e){t.customer=e})})},watch:{customer:function(){e.$emit("update_customer",this.customer)}}},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"items px-2 py-1"},[n("v-col",{staticClass:"pb-0 mb-2",attrs:{cols:"12"}},[n("v-autocomplete",{attrs:{dense:"",clearable:"",autofocus:"","auto-select-first":"",outlined:"",color:"indigo",label:"Customer",items:e.customers,"append-outer-icon":"mdi-plus","background-color":"white","no-data-text":"Customer not found","hide-details":""},model:{value:e.customer,callback:function(t){e.customer=t},expression:"customer"}})],1)],1)};r._withStripped=!0;var l={data:function(){return{pos_profile:"",pos_opening_shift:"",invoice_doc:"",customer:"",customer_info:"",additional_discount:0,total_tax:0,total:0,items:[],itemsPerPage:1e3,expanded:[],singleExpand:!0,items_headers:[{text:"Name",align:"start",sortable:!0,value:"item_name"},{text:"QTY",value:"qty",align:"center"},{text:"UOM",value:"stock_uom",align:"center"},{text:"Rate",value:"rate",align:"center"},{text:"Amount",value:"amount",align:"center"}]}},components:{Customer:function(e,t,n,o,i,a,s,c){var r=("function"==typeof n?n.options:n)||{};return r.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/Customer.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,i&&(r.functional=!0)),r._scopeId=o,r}({render:r,staticRenderFns:[]},0,c,void 0,!1)},computed:{total_qty:function(){this.close_payments();var e=0;return this.items.forEach(function(t){e+=t.qty}),flt(e)},subtotal:function(){this.close_payments();var e=0;return this.items.forEach(function(t){e+=t.qty*t.rate}),flt(e)},total_items_discount_amount:function(){var e=0;return this.items.forEach(function(t){e+=t.qty*t.discount_amount}),flt(e)}},methods:{remove_item:function(e){var t=this.items.findIndex(function(t){return t===e});this.items.splice(t,1);var n=this.expanded.findIndex(function(t){return t===e});n>=0&&this.expanded.splice(n,1)},add_one:function(e){e.qty++},subtract_one:function(e){e.qty--,e.qty<=0&&this.remove_item(e)},add_item:function(e){var t=this.items.findIndex(function(t){return t.item_code===e.item_code});if(-1===t){var n=Object.assign({},e);n.qty=1,n.discount_amount=0,n.discount_percentage=0,e.discount_amount_per_item=0,n.price_list_rate=e.rate,this.items.unshift(n),this.update_item_detail(n)}else this.update_items_details([this.items[t]]),this.items[t].qty++,this.items[t].actual_qty=e.actual_qty},cancel_invoice:function(){var t=this.get_invoice_doc();t.name&&frappe.call({method:"posawesome.posawesome.api.posapp.delete_invoice",args:{invoice:t.name},async:!0,callback:function(t){t.message&&e.$emit("show_mesage",{text:t.message,color:"warning"})}}),this.items=[],this.customer=this.pos_profile.customer,this.invoice_doc=""},new_invoice:function(e){void 0===e&&(e={});var t=this.get_invoice_doc();t.name?this.update_invoice(t):t.items.length&&this.save_draft_invoice(t),e.name?(this.invoice_doc=e,this.items=e.items,this.customer=e.customer):(this.items=[],this.customer=this.pos_profile.customer,this.invoice_doc="")},save_draft_invoice:function(){var e=this,t=this.get_invoice_doc();return frappe.call({method:"posawesome.posawesome.api.posapp.save_draft_invoice",args:{data:t},async:!1,callback:function(t){t.message&&(e.invoice_doc=t.message)}}),this.invoice_doc},get_invoice_doc:function(){var e={};return this.invoice_doc.name&&(e=Object.assign({},this.invoice_doc)),e.doctype="Sales Invoice",e.is_pos=1,e.company=e.company||this.pos_profile.company,e.pos_profile=e.pos_profile||this.pos_profile.name,e.currency=e.currency||this.pos_profile.currency,e.naming_series=e.naming_series||this.pos_profile.naming_series,e.customer=this.customer,e.items=this.get_invoice_items(),e.total=this.subtotal,e.posa_pos_opening_shift=this.pos_opening_shift.name,e.payments=e.payments=this.get_payments(),e.taxes=[],e},get_invoice_items:function(){var e=[];return this.items.forEach(function(t){e.push({item_code:t.item_code,qty:t.qty,rate:t.rate})}),e},get_payments:function(){var e=[];return this.pos_profile.payments.forEach(function(t){e.push({amount:0,mode_of_payment:t.mode_of_payment,default:t.default,account:""})}),e},update_invoice:function(e){var t=this;return frappe.call({method:"posawesome.posawesome.api.posapp.update_invoice",args:{data:e},async:!1,callback:function(e){e.message&&(t.invoice_doc=e.message)}}),this.invoice_doc},proces_invoice:function(){var e=this.get_invoice_doc();return e.name?this.update_invoice(e):this.save_draft_invoice(e)},show_payment:function(){if(this.customer)if(this.items.length){e.$emit("show_payment","true");var t=this.proces_invoice();t.customer_info=this.customer_info,e.$emit("send_invoice_doc_payment",t)}else e.$emit("show_mesage",{text:"There is no Items !",color:"error"});else e.$emit("show_mesage",{text:"There is no Customer !",color:"error"})},get_draft_invoices:function(){frappe.call({method:"posawesome.posawesome.api.posapp.get_draft_invoices",args:{pos_opening_shift:this.pos_opening_shift.name},async:!1,callback:function(t){t.message&&e.$emit("open_drafts",t.message)}})},close_payments:function(){e.$emit("show_payment","false")},update_items_details:function(e){frappe.call({method:"posawesome.posawesome.api.posapp.get_items_details",args:{pos_profile:this.pos_profile,items_data:e},callback:function(t){t.message&&e.forEach(function(e){var n=t.message.find(function(t){return t.item_code==e.item_code});e.actual_qty=n.actual_qty,e.serial_no_data=n.serial_no_data,e.batch_no_data=n.batch_no_data,e.uoms=n.uoms,e.rate=n.rate,e.currency=n.currency})}})},update_item_detail:function(e){var t=this;frappe.call({method:"posawesome.posawesome.api.posapp.get_item_detail",args:{doc:this.get_invoice_doc(),data:{item_code:e.item_code,customer:this.customer,doctype:"Sales Invoice",name:"New Sales Invoice 1",company:this.pos_profile.company,conversion_rate:1,qty:e.qty,price_list_rate:e.price_list_rate,child_docname:"New Sales Invoice Item 1",cost_center:this.pos_profile.cost_center,currency:this.pos_profile.currency,plc_conversion_rate:1,pos_profile:this.pos_profile.name,price_list:this.pos_profile.selling_price_list,stock_uom:e.uom,tax_category:"",transaction_type:"selling",update_stock:1}},callback:function(n){if(n.message){var o=n.message;e.discount_amount_on_rate=o.discount_amount_on_rate,e.discount_amount_on_rate=o.discount_amount_on_rate,e.discount_percentage=o.discount_percentage,e.discount_percentage_on_rate=o.discount_percentage_on_rate,e.discount_amount=o.discount_amount||0,e.has_pricing_rule=o.has_pricing_rule,e.last_purchase_rate=o.last_purchase_rate,e.price_list_rate=o.price_list_rate,e.price_or_product_discount=o.price_or_product_discount,e.pricing_rule_for=o.pricing_rule_for,e.pricing_rules=o.pricing_rules,e.projected_qty=o.projected_qty,e.reserved_qty=o.reserved_qty,e.batch_no=o.batch_no,e.actual_qty=o.actual_qty,t.calc_item_price(e)}}})},fetch_customer_details:function(){var e=this;return this.customer?new Promise(function(t){frappe.db.get_value("Customer",e.customer,["email_id","mobile_no","image","loyalty_program"]).then(function(n){var o=n.message,i=o.loyalty_program;i?frappe.call({method:"erpnext.accounts.doctype.loyalty_program.loyalty_program.get_loyalty_program_details_with_points",args:{customer:e.customer,loyalty_program:i,silent:!0},callback:function(n){var i=n.message,a=i.loyalty_points,s=i.conversion_factor;n.exc||(e.customer_info=Object.assign({},o,{customer:e.customer,loyalty_points:a,conversion_factor:s}),t())}}):(e.customer_info=Object.assign({},o,{customer:e.customer}),t())})}):new Promise(function(t){e.customer_info={},t()})},calc_prices:function(e,t,n){"rate"===event.target.id?(e.discount_percentage=0,t<e.price_list_rate?e.discount_amount=flt(e.price_list_rate)-flt(t):t<0?(e.rate=e.price_list_rate,e.discount_amount=0):t>e.price_list_rate&&(e.discount_amount=0)):"discount_amount"===event.target.id?t<0?(e.discount_amount=0,e.discount_percentage=0):(e.rate=flt(e.price_list_rate)-flt(t),e.discount_percentage=0):"discount_percentage"===event.target.id&&(t<0?(e.discount_amount=0,e.discount_percentage=0):(e.rate=flt(e.price_list_rate)-flt(e.price_list_rate)*flt(t)/100,e.discount_amount=flt(e.price_list_rate)-flt(e.rate)))},calc_item_price:function(e){e.has_pricing_rule&&(e.discount_percentage?(e.rate=flt(e.price_list_rate)-flt(e.price_list_rate)*flt(e.discount_percentage)/100,e.discount_amount=flt(e.price_list_rate)-flt(e.rate),e.discount_amount=flt(e.price_list_rate)-flt(e.rate)):e.discount_amount?e.rate=flt(e.price_list_rate)-flt(e.discount_amount):"Rate"===e.pricing_rule_for&&(e.rate=e.price_list_rate))}},created:function(){var t=this;this.$nextTick(function(){}),e.$on("register_pos_profile",function(e){t.pos_profile=e.pos_profile,t.customer=e.pos_profile.customer,t.pos_opening_shift=e.pos_opening_shift}),e.$on("add_item",function(e){t.add_item(e)}),e.$on("update_customer",function(e){t.customer=e}),e.$on("new_invoice",function(){t.invoice_doc="",t.cancel_invoice()}),e.$on("load_invoice",function(e){t.new_invoice(e)})},mounted:function(){},watch:{customer:function(){this.close_payments(),e.$emit("set_customer",this.customer),this.fetch_customer_details()},expanded:function(e){this.update_items_details(e)}}},d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",{staticClass:"cards my-0 py-0 grey lighten-5",staticStyle:{"max-height":"70vh",height:"70vh"}},[n("Customer"),e._v(" "),n("div",{staticClass:"my-0 py-0 overflow-y-auto",staticStyle:{"max-height":"59vh"}},[[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.items_headers,items:e.items,"single-expand":e.singleExpand,expanded:e.expanded,"item-key":"item_code","show-expand":"","items-per-page":e.itemsPerPage,"hide-default-footer":""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"item.amount",fn:function(t){var n=t.item;return[e._v(e._s(n.qty*n.rate))]}},{key:"expanded-item",fn:function(t){var o=t.headers,i=t.item;return[n("td",{staticClass:"ma-0 pa-0",attrs:{colspan:o.length}},[n("v-row",{staticClass:"ma-0 pa-0"},[n("v-col",{attrs:{cols:"1"}},[n("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(t){return t.stopPropagation(),e.remove_item(i)}}},[n("v-icon",[e._v("mdi-delete")])],1)],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-col",{attrs:{cols:"1"}},[n("v-btn",{attrs:{icon:"",color:"indigo lighten-1"},on:{click:function(t){return t.stopPropagation(),e.subtract_one(i)}}},[n("v-icon",[e._v("mdi-minus-circle-outline")])],1)],1),e._v(" "),n("v-col",{attrs:{cols:"1"}},[n("v-btn",{attrs:{icon:"",color:"indigo lighten-1"},on:{click:function(t){return t.stopPropagation(),e.add_one(i)}}},[n("v-icon",[e._v("mdi-plus-circle-outline")])],1)],1)],1),e._v(" "),n("v-row",{staticClass:"ma-0 pa-0"},[n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Item Code","background-color":"white","hide-details":"",readonly:""},model:{value:i.item_code,callback:function(t){e.$set(i,"item_code",t)},expression:"item.item_code"}})],1),e._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"QTY","background-color":"white","hide-details":"",type:"number"},model:{value:i.qty,callback:function(t){e.$set(i,"qty",e._n(t))},expression:"item.qty"}})],1),e._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"UOM","background-color":"white","hide-details":"",readonly:""},model:{value:i.stock_uom,callback:function(t){e.$set(i,"stock_uom",t)},expression:"item.stock_uom"}})],1),e._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Rate","background-color":"white","hide-details":"",type:"number",prefix:e.invoice_doc.currency,id:"rate",disabled:1==i.has_pricing_rule},on:{change:function(t){return e.calc_prices(i,t)}},model:{value:i.rate,callback:function(t){e.$set(i,"rate",e._n(t))},expression:"item.rate"}})],1),e._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Price list Rate","background-color":"white","hide-details":"",type:"number",readonly:"",prefix:e.invoice_doc.currency},model:{value:i.price_list_rate,callback:function(t){e.$set(i,"price_list_rate",t)},expression:"item.price_list_rate"}})],1),e._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Discount Percentage","background-color":"white","hide-details":"",type:"number",id:"discount_percentage",disabled:1==i.has_pricing_rule},on:{change:function(t){return e.calc_prices(i,t)}},model:{value:i.discount_percentage,callback:function(t){e.$set(i,"discount_percentage",e._n(t))},expression:"item.discount_percentage"}})],1),e._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Discount Amount","background-color":"white","hide-details":"",type:"number",prefix:e.invoice_doc.currency,id:"discount_amount",disabled:1==i.has_pricing_rule},on:{change:function(t){return e.calc_prices(i,t)}},model:{value:i.discount_amount,callback:function(t){e.$set(i,"discount_amount",e._n(t))},expression:"item.discount_amount"}})],1),e._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Available QTY","background-color":"white","hide-details":"",type:"number",readonly:""},model:{value:i.actual_qty,callback:function(t){e.$set(i,"actual_qty",t)},expression:"item.actual_qty"}})],1),e._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Group","background-color":"white","hide-details":"",readonly:""},model:{value:i.item_group,callback:function(t){e.$set(i,"item_group",t)},expression:"item.item_group"}})],1)],1)],1)]}}])})]],2)],1),e._v(" "),n("v-row",[n("v-col",{staticClass:"pt-0 pr-0",attrs:{cols:"8"}},[n("v-card",{staticClass:"cards mb-0 mt-3 py-0 grey lighten-5",staticStyle:{"max-height":"20vh",height:"20vh"}},[n("v-row",{staticClass:"pa-1 pt-2",staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"6","no-gutters":""}},[n("v-row",{staticClass:"ma-1 pa-0",staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Total Qty",outlined:"",dense:"",readonly:"","hide-details":"",type:"number"},model:{value:e.total_qty,callback:function(t){e.total_qty=t},expression:"total_qty"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Items Discounts",outlined:"",dense:"",readonly:"","hide-details":"",type:"number",prefix:e.pos_profile.currency},model:{value:e.total_items_discount_amount,callback:function(t){e.total_items_discount_amount=t},expression:"total_items_discount_amount"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"ِAdditional Discount",outlined:"",dense:"","hide-details":"",type:"number",prefix:e.pos_profile.currency},model:{value:e.additional_discount,callback:function(t){e.additional_discount=t},expression:"additional_discount"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{staticClass:"text--red",attrs:{label:"Total",outlined:"",dense:"",readonly:"","hide-details":"",type:"number",prefix:e.pos_profile.currency},model:{value:e.subtotal,callback:function(t){e.subtotal=t},expression:"subtotal"}})],1)],1)],1),e._v(" "),n("v-col",{attrs:{"no-gutters":"",cols:"6"}},[n("v-row",{staticClass:"ma-1 pa-0",staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Email",outlined:"",dense:"",disabled:"","hide-details":""},model:{value:e.customer_info.email_id,callback:function(t){e.$set(e.customer_info,"email_id",t)},expression:"customer_info.email_id"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"ِPhone Number",outlined:"",dense:"","hide-details":"",disabled:"",type:"number"},model:{value:e.customer_info.mobile_no,callback:function(t){e.$set(e.customer_info,"mobile_no",t)},expression:"customer_info.mobile_no"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Loyalty Program",outlined:"",dense:"",disabled:"","hide-details":""},model:{value:e.customer_info.loyalty_program,callback:function(t){e.$set(e.customer_info,"loyalty_program",t)},expression:"customer_info.loyalty_program"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Loyalty Points",outlined:"",dense:"",disabled:"","hide-details":"",type:"number"},model:{value:e.customer_info.loyalty_points,callback:function(t){e.$set(e.customer_info,"loyalty_points",t)},expression:"customer_info.loyalty_points"}})],1)],1)],1)],1)],1)],1),e._v(" "),n("v-col",{staticClass:"pt-0 pr-3",attrs:{cols:"4"}},[n("v-card",{staticClass:"cards mb-0 mt-3 py-0",staticStyle:{"max-height":"20vh",height:"20vh"},attrs:{flat:""}},[n("v-row",{staticStyle:{height:"53%"},attrs:{align:"start"}},[n("v-col",{attrs:{cols:"12"}},[n("v-btn",{staticClass:"pa-0",attrs:{block:"",large:"",color:"warning",dark:""},on:{click:e.get_draft_invoices}},[e._v("Get Hold Invoice")])],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-btn",{staticClass:"pa-0",attrs:{block:"",large:"",color:"error",dark:""},on:{click:e.cancel_invoice}},[e._v("Cancel")])],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-btn",{staticClass:"pa-0",attrs:{block:"",large:"",color:"success",dark:""},on:{click:e.new_invoice}},[e._v("New")])],1)],1),e._v(" "),n("v-row",{staticStyle:{height:"54%"},attrs:{align:"end"}},[n("v-col",{attrs:{cols:"12"}},[n("v-btn",{staticClass:"pa-0",attrs:{block:"",large:"",color:"primary",dark:""},on:{click:e.show_payment}},[e._v("PAY")])],1)],1)],1)],1)],1)],1)};d._withStripped=!0;var m=function(e,t,n,o,i,a,s,c){var r,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/Invoice.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=o,t&&(r=function(e){t.call(this,s(e))}),void 0!==r)if(l.functional){var d=l.render;l.render=function(e,t){return r.call(t),d(e,t)}}else{var m=l.beforeCreate;l.beforeCreate=m?[].concat(m,r):[r]}return l}({render:d,staticRenderFns:[]},function(e){e&&e("data-v-ba8a1ac4_0",{source:"\n.border_line_bottom[data-v-ba8a1ac4] {\n  border-bottom: 1px solid lightgray;\n}\n",map:{version:3,sources:["/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/Invoice.vue"],names:[],mappings:";AAozBA;EACA,kCAAA;AACA",file:"Invoice.vue",sourcesContent:['<template>\n  <div>\n    <v-card\n      style="max-height: 70vh; height: 70vh"\n      class="cards my-0 py-0 grey lighten-5"\n    >\n      <Customer></Customer>\n      <div class="my-0 py-0 overflow-y-auto" style="max-height: 59vh">\n        <template @mouseover="style = \'cursor: pointer\'">\n          <v-data-table\n            :headers="items_headers"\n            :items="items"\n            :single-expand="singleExpand"\n            :expanded.sync="expanded"\n            item-key="item_code"\n            show-expand\n            class="elevation-1"\n            :items-per-page="itemsPerPage"\n            hide-default-footer\n          >\n            <template v-slot:item.amount="{ item }">{{\n              item.qty * item.rate\n            }}</template>\n\n            <template v-slot:expanded-item="{ headers, item }">\n              <td :colspan="headers.length" class="ma-0 pa-0">\n                <v-row class="ma-0 pa-0">\n                  <v-col cols="1">\n                    <v-btn icon color="red" @click.stop="remove_item(item)">\n                      <v-icon>mdi-delete</v-icon>\n                    </v-btn>\n                  </v-col>\n                  <v-spacer></v-spacer>\n                  <v-col cols="1">\n                    <v-btn\n                      icon\n                      color="indigo lighten-1"\n                      @click.stop="subtract_one(item)"\n                    >\n                      <v-icon>mdi-minus-circle-outline</v-icon>\n                    </v-btn>\n                  </v-col>\n                  <v-col cols="1">\n                    <v-btn\n                      icon\n                      color="indigo lighten-1"\n                      @click.stop="add_one(item)"\n                    >\n                      <v-icon>mdi-plus-circle-outline</v-icon>\n                    </v-btn>\n                  </v-col>\n                </v-row>\n                <v-row class="ma-0 pa-0">\n                  <v-col cols="4">\n                    <v-text-field\n                      dense\n                      outlined\n                      color="indigo"\n                      label="Item Code"\n                      background-color="white"\n                      hide-details\n                      v-model="item.item_code"\n                      readonly\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols="4">\n                    <v-text-field\n                      dense\n                      outlined\n                      color="indigo"\n                      label="QTY"\n                      background-color="white"\n                      hide-details\n                      v-model.number="item.qty"\n                      type="number"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols="4">\n                    <v-text-field\n                      dense\n                      outlined\n                      color="indigo"\n                      label="UOM"\n                      background-color="white"\n                      hide-details\n                      v-model="item.stock_uom"\n                      readonly\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols="4">\n                    <v-text-field\n                      dense\n                      outlined\n                      color="indigo"\n                      label="Rate"\n                      background-color="white"\n                      hide-details\n                      v-model.number="item.rate"\n                      type="number"\n                      :prefix="invoice_doc.currency"\n                      @change="calc_prices(item, $event)"\n                      id="rate"\n                      :disabled="item.has_pricing_rule == 1 ? true : false"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols="4">\n                    <v-text-field\n                      dense\n                      outlined\n                      color="indigo"\n                      label="Price list Rate"\n                      background-color="white"\n                      hide-details\n                      v-model="item.price_list_rate"\n                      type="number"\n                      readonly\n                      :prefix="invoice_doc.currency"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols="4">\n                    <v-text-field\n                      dense\n                      outlined\n                      color="indigo"\n                      label="Discount Percentage"\n                      background-color="white"\n                      hide-details\n                      v-model.number="item.discount_percentage"\n                      type="number"\n                      @change="calc_prices(item, $event)"\n                      id="discount_percentage"\n                      :disabled="item.has_pricing_rule == 1 ? true : false"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols="4">\n                    <v-text-field\n                      dense\n                      outlined\n                      color="indigo"\n                      label="Discount Amount"\n                      background-color="white"\n                      hide-details\n                      v-model.number="item.discount_amount"\n                      type="number"\n                      :prefix="invoice_doc.currency"\n                      @change="calc_prices(item, $event)"\n                      id="discount_amount"\n                      :disabled="item.has_pricing_rule == 1 ? true : false"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols="4">\n                    <v-text-field\n                      dense\n                      outlined\n                      color="indigo"\n                      label="Available QTY"\n                      background-color="white"\n                      hide-details\n                      v-model="item.actual_qty"\n                      type="number"\n                      readonly\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols="4">\n                    <v-text-field\n                      dense\n                      outlined\n                      color="indigo"\n                      label="Group"\n                      background-color="white"\n                      hide-details\n                      v-model="item.item_group"\n                      readonly\n                    ></v-text-field>\n                  </v-col>\n                  \x3c!-- <v-col cols="12">\n                    <p>More info about {{ item.name }} {{ item }}</p>\n                  </v-col> --\x3e\n                </v-row>\n              </td>\n            </template>\n          </v-data-table>\n        </template>\n      </div>\n    </v-card>\n    <v-row>\n      <v-col class="pt-0 pr-0" cols="8">\n        <v-card\n          style="max-height: 20vh; height: 20vh"\n          class="cards mb-0 mt-3 py-0 grey lighten-5"\n        >\n          <v-row no-gutters class="pa-1 pt-2" style="height: 100%">\n            <v-col cols="6" no-gutters>\n              <v-row no-gutters class="ma-1 pa-0" style="height: 100%">\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="total_qty"\n                    label="Total Qty"\n                    outlined\n                    dense\n                    readonly\n                    hide-details\n                    type="number"\n                  ></v-text-field>\n                </v-col>\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="total_items_discount_amount"\n                    label="Items Discounts"\n                    outlined\n                    dense\n                    readonly\n                    hide-details\n                    type="number"\n                    :prefix="pos_profile.currency"\n                  ></v-text-field>\n                </v-col>\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="additional_discount"\n                    label="ِAdditional Discount"\n                    outlined\n                    dense\n                    hide-details\n                    type="number"\n                    :prefix="pos_profile.currency"\n                  ></v-text-field>\n                </v-col>\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="subtotal"\n                    label="Total"\n                    outlined\n                    dense\n                    readonly\n                    hide-details\n                    class="text--red"\n                    type="number"\n                    :prefix="pos_profile.currency"\n                  ></v-text-field>\n                </v-col>\n              </v-row>\n            </v-col>\n            <v-col no-gutters cols="6">\n              <v-row no-gutters class="ma-1 pa-0" style="height: 100%">\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="customer_info.email_id"\n                    label="Email"\n                    outlined\n                    dense\n                    disabled\n                    hide-details\n                  ></v-text-field>\n                </v-col>\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="customer_info.mobile_no"\n                    label="ِPhone Number"\n                    outlined\n                    dense\n                    hide-details\n                    disabled\n                    type="number"\n                  ></v-text-field>\n                </v-col>\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="customer_info.loyalty_program"\n                    label="Loyalty Program"\n                    outlined\n                    dense\n                    disabled\n                    hide-details\n                  ></v-text-field>\n                </v-col>\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="customer_info.loyalty_points"\n                    label="Loyalty Points"\n                    outlined\n                    dense\n                    disabled\n                    hide-details\n                    type="number"\n                  ></v-text-field>\n                </v-col>\n              </v-row>\n            </v-col>\n          </v-row>\n        </v-card>\n      </v-col>\n      <v-col class="pt-0 pr-3" cols="4">\n        <v-card\n          flat\n          style="max-height: 20vh; height: 20vh"\n          class="cards mb-0 mt-3 py-0"\n        >\n          <v-row align="start" style="height: 53%">\n            <v-col cols="12">\n              <v-btn\n                block\n                class="pa-0"\n                large\n                color="warning"\n                dark\n                @click="get_draft_invoices"\n                >Get Hold Invoice</v-btn\n              >\n            </v-col>\n            <v-col cols="6">\n              <v-btn\n                block\n                class="pa-0"\n                large\n                color="error"\n                dark\n                @click="cancel_invoice"\n                >Cancel</v-btn\n              >\n            </v-col>\n            <v-col cols="6">\n              <v-btn\n                block\n                class="pa-0"\n                large\n                color="success"\n                dark\n                @click="new_invoice"\n                >New</v-btn\n              >\n            </v-col>\n          </v-row>\n          <v-row align="end" style="height: 54%">\n            <v-col cols="12">\n              <v-btn\n                block\n                class="pa-0"\n                large\n                color="primary"\n                @click="show_payment"\n                dark\n                >PAY</v-btn\n              >\n            </v-col>\n          </v-row>\n        </v-card>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport { evntBus } from "../../bus";\nimport Customer from "./Customer.vue";\nexport default {\n  // props: ["pos_profile"],\n  data() {\n    return {\n      pos_profile: "",\n      pos_opening_shift: "",\n      invoice_doc: "",\n      customer: "",\n      customer_info: "",\n      additional_discount: 0,\n      total_tax: 0,\n      total: 0,\n      items: [],\n      itemsPerPage: 1000,\n      expanded: [],\n      singleExpand: true,\n      items_headers: [\n        {\n          text: "Name",\n          align: "start",\n          sortable: true,\n          value: "item_name",\n        },\n        { text: "QTY", value: "qty", align: "center" },\n        { text: "UOM", value: "stock_uom", align: "center" },\n        { text: "Rate", value: "rate", align: "center" },\n        { text: "Amount", value: "amount", align: "center" },\n      ],\n    };\n  },\n  components: {\n    Customer,\n  },\n  computed: {\n    total_qty() {\n      this.close_payments();\n      let qty = 0;\n      this.items.forEach((item) => {\n        qty += item.qty;\n      });\n      return flt(qty);\n    },\n    subtotal() {\n      this.close_payments();\n      let sum = 0;\n      this.items.forEach((item) => {\n        sum += item.qty * item.rate;\n      });\n      return flt(sum);\n    },\n    total_items_discount_amount() {\n      let sum = 0;\n      this.items.forEach((item) => {\n        sum += item.qty * item.discount_amount;\n      });\n      return flt(sum);\n    },\n  },\n  methods: {\n    remove_item(item) {\n      const index = this.items.findIndex((el) => el === item);\n      this.items.splice(index, 1);\n      const idx = this.expanded.findIndex((el) => el === item);\n      if (idx >= 0) {\n        this.expanded.splice(idx, 1);\n      }\n    },\n    add_one(item) {\n      item.qty++;\n      // this.$forceUpdate();\n    },\n    subtract_one(item) {\n      item.qty--;\n      if (item.qty <= 0) {\n        this.remove_item(item);\n      }\n      // this.$forceUpdate();\n    },\n    add_item(item) {\n      const index = this.items.findIndex(\n        (el) => el.item_code === item.item_code\n      );\n      if (index === -1) {\n        const new_item = { ...item };\n        new_item.qty = 1;\n        new_item.discount_amount = 0;\n        new_item.discount_percentage = 0;\n        item.discount_amount_per_item = 0;\n        new_item.price_list_rate = item.rate;\n        this.items.unshift(new_item);\n        this.update_item_detail(new_item);\n      } else {\n        this.update_items_details([this.items[index]]);\n        this.items[index].qty++;\n        this.items[index].actual_qty = item.actual_qty;\n      }\n    },\n    cancel_invoice() {\n      const doc = this.get_invoice_doc();\n      if (doc.name) {\n        frappe.call({\n          method: "posawesome.posawesome.api.posapp.delete_invoice",\n          args: { invoice: doc.name },\n          async: true,\n          callback: function (r) {\n            if (r.message) {\n              evntBus.$emit("show_mesage", {\n                text: r.message,\n                color: "warning",\n              });\n            }\n          },\n        });\n      }\n      this.items = [];\n      this.customer = this.pos_profile.customer;\n      this.invoice_doc = "";\n    },\n    new_invoice(data = {}) {\n      const doc = this.get_invoice_doc();\n      if (doc.name) {\n        this.update_invoice(doc);\n      } else {\n        if (doc.items.length) {\n          this.save_draft_invoice(doc);\n        }\n      }\n      if (!data.name) {\n        this.items = [];\n        this.customer = this.pos_profile.customer;\n        this.invoice_doc = "";\n      } else {\n        this.invoice_doc = data;\n        this.items = data.items;\n        this.customer = data.customer;\n      }\n    },\n    save_draft_invoice() {\n      const vm = this;\n      const doc = this.get_invoice_doc();\n      frappe.call({\n        method: "posawesome.posawesome.api.posapp.save_draft_invoice",\n        args: { data: doc },\n        async: false,\n        callback: function (r) {\n          if (r.message) {\n            vm.invoice_doc = r.message;\n          }\n        },\n      });\n      return this.invoice_doc;\n    },\n    get_invoice_doc() {\n      let doc = {};\n      if (this.invoice_doc.name) {\n        doc = { ...this.invoice_doc };\n      }\n      doc.doctype = "Sales Invoice";\n      doc.is_pos = 1;\n      doc.company = doc.company || this.pos_profile.company;\n      doc.pos_profile = doc.pos_profile || this.pos_profile.name;\n      doc.currency = doc.currency || this.pos_profile.currency;\n      doc.naming_series = doc.naming_series || this.pos_profile.naming_series;\n      doc.customer = this.customer;\n      doc.items = this.get_invoice_items();\n      doc.total = this.subtotal;\n      (doc.posa_pos_opening_shift = this.pos_opening_shift.name),\n        (doc.payments = doc.payments = this.get_payments()),\n        (doc.taxes = []);\n      return doc;\n    },\n    get_invoice_items() {\n      const items_list = [];\n      this.items.forEach((item) => {\n        items_list.push({\n          item_code: item.item_code,\n          qty: item.qty,\n          rate: item.rate,\n        });\n      });\n      return items_list;\n    },\n    get_payments() {\n      const payments = [];\n      this.pos_profile.payments.forEach((payment) => {\n        payments.push({\n          amount: 0,\n          mode_of_payment: payment.mode_of_payment,\n          default: payment.default,\n          account: "",\n        });\n      });\n      return payments;\n    },\n    update_invoice(doc) {\n      const vm = this;\n      frappe.call({\n        method: "posawesome.posawesome.api.posapp.update_invoice",\n        args: {\n          data: doc,\n        },\n        async: false,\n        callback: function (r) {\n          if (r.message) {\n            vm.invoice_doc = r.message;\n          }\n        },\n      });\n      return this.invoice_doc;\n    },\n    proces_invoice() {\n      const doc = this.get_invoice_doc();\n      if (doc.name) {\n        return this.update_invoice(doc);\n      } else {\n        return this.save_draft_invoice(doc);\n      }\n    },\n    show_payment() {\n      if (!this.customer) {\n        evntBus.$emit("show_mesage", {\n          text: `There is no Customer !`,\n          color: "error",\n        });\n        return;\n      }\n      if (!this.items.length) {\n        evntBus.$emit("show_mesage", {\n          text: `There is no Items !`,\n          color: "error",\n        });\n        return;\n      }\n      evntBus.$emit("show_payment", "true");\n      const invoice_doc = this.proces_invoice();\n      invoice_doc.customer_info = this.customer_info;\n      evntBus.$emit("send_invoice_doc_payment", invoice_doc);\n    },\n    get_draft_invoices() {\n      const vm = this;\n      frappe.call({\n        method: "posawesome.posawesome.api.posapp.get_draft_invoices",\n        args: {\n          pos_opening_shift: this.pos_opening_shift.name,\n        },\n        async: false,\n        callback: function (r) {\n          if (r.message) {\n            evntBus.$emit("open_drafts", r.message);\n          }\n        },\n      });\n    },\n    close_payments() {\n      evntBus.$emit("show_payment", "false");\n    },\n    update_items_details(items) {\n      const vm = this;\n      frappe.call({\n        method: "posawesome.posawesome.api.posapp.get_items_details",\n        args: {\n          pos_profile: vm.pos_profile,\n          items_data: items,\n        },\n        callback: function (r) {\n          if (r.message) {\n            items.forEach((item) => {\n              const updated_item = r.message.find(\n                (element) => element.item_code == item.item_code\n              );\n              item.actual_qty = updated_item.actual_qty;\n              item.serial_no_data = updated_item.serial_no_data;\n              item.batch_no_data = updated_item.batch_no_data;\n              item.uoms = updated_item.uoms;\n              item.rate = updated_item.rate;\n              item.currency = updated_item.currency;\n            });\n          }\n        },\n      });\n    },\n    update_item_detail(item) {\n      const vm = this;\n      frappe.call({\n        method: "posawesome.posawesome.api.posapp.get_item_detail",\n        args: {\n          doc: this.get_invoice_doc(),\n          data: {\n            item_code: item.item_code,\n            customer: this.customer,\n            doctype: "Sales Invoice",\n            name: "New Sales Invoice 1",\n            company: this.pos_profile.company,\n            conversion_rate: 1,\n            qty: item.qty,\n            price_list_rate: item.price_list_rate,\n            child_docname: "New Sales Invoice Item 1",\n            cost_center: this.pos_profile.cost_center,\n            currency: this.pos_profile.currency,\n            plc_conversion_rate: 1,\n            pos_profile: this.pos_profile.name,\n            price_list: this.pos_profile.selling_price_list,\n            stock_uom: item.uom,\n            tax_category: "",\n            transaction_type: "selling",\n            update_stock: 1,\n          },\n        },\n        callback: function (r) {\n          if (r.message) {\n            const data = r.message;\n            item.discount_amount_on_rate = data.discount_amount_on_rate;\n            item.discount_amount_on_rate = data.discount_amount_on_rate;\n            item.discount_percentage = data.discount_percentage;\n            item.discount_percentage_on_rate = data.discount_percentage_on_rate;\n            item.discount_amount = data.discount_amount || 0;\n            item.has_pricing_rule = data.has_pricing_rule;\n            item.last_purchase_rate = data.last_purchase_rate;\n            item.price_list_rate = data.price_list_rate;\n            item.price_or_product_discount = data.price_or_product_discount;\n            item.pricing_rule_for = data.pricing_rule_for;\n            item.pricing_rules = data.pricing_rules;\n            item.projected_qty = data.projected_qty;\n            item.reserved_qty = data.reserved_qty;\n            item.batch_no = data.batch_no;\n            item.actual_qty = data.actual_qty;\n            vm.calc_item_price(item);\n          }\n        },\n      });\n    },\n    fetch_customer_details() {\n      const vm = this;\n      if (this.customer) {\n        return new Promise((resolve) => {\n          frappe.db\n            .get_value("Customer", vm.customer, [\n              "email_id",\n              "mobile_no",\n              "image",\n              "loyalty_program",\n            ])\n            .then(({ message }) => {\n              const { loyalty_program } = message;\n              if (loyalty_program) {\n                frappe.call({\n                  method:\n                    "erpnext.accounts.doctype.loyalty_program.loyalty_program.get_loyalty_program_details_with_points",\n                  args: {\n                    customer: vm.customer,\n                    loyalty_program,\n                    silent: true,\n                  },\n                  callback: (r) => {\n                    const { loyalty_points, conversion_factor } = r.message;\n                    if (!r.exc) {\n                      vm.customer_info = {\n                        ...message,\n                        customer: vm.customer,\n                        loyalty_points,\n                        conversion_factor,\n                      };\n                      resolve();\n                    }\n                  },\n                });\n              } else {\n                vm.customer_info = { ...message, customer: vm.customer };\n                resolve();\n              }\n            });\n        });\n      } else {\n        return new Promise((resolve) => {\n          vm.customer_info = {};\n          resolve();\n        });\n      }\n    },\n    calc_prices(item, value, $event) {\n      if (event.target.id === "rate") {\n        item.discount_percentage = 0;\n        if (value < item.price_list_rate) {\n          item.discount_amount = flt(item.price_list_rate) - flt(value);\n        } else if (value < 0) {\n          item.rate = item.price_list_rate;\n          item.discount_amount = 0;\n        } else if (value > item.price_list_rate) {\n          item.discount_amount = 0;\n        }\n      } else if (event.target.id === "discount_amount") {\n        if (value < 0) {\n          item.discount_amount = 0;\n          item.discount_percentage = 0;\n        } else {\n          item.rate = flt(item.price_list_rate) - flt(value);\n          item.discount_percentage = 0;\n        }\n      } else if (event.target.id === "discount_percentage") {\n        if (value < 0) {\n          item.discount_amount = 0;\n          item.discount_percentage = 0;\n        } else {\n          item.rate =\n            flt(item.price_list_rate) -\n            (flt(item.price_list_rate) * flt(value)) / 100;\n          item.discount_amount = flt(item.price_list_rate) - flt(item.rate);\n        }\n      }\n    },\n    calc_item_price(item) {\n      if (!item.has_pricing_rule) {\n        return;\n      }\n      if (item.discount_percentage) {\n        item.rate =\n          flt(item.price_list_rate) -\n          (flt(item.price_list_rate) * flt(item.discount_percentage)) / 100;\n        item.discount_amount = flt(item.price_list_rate) - flt(item.rate);\n        item.discount_amount = flt(item.price_list_rate) - flt(item.rate);\n      } else if (item.discount_amount) {\n        item.rate = flt(item.price_list_rate) - flt(item.discount_amount);\n      } else if (item.pricing_rule_for === "Rate") {\n        item.rate = item.price_list_rate;\n      }\n    },\n  },\n  created() {\n    this.$nextTick(function () {});\n    evntBus.$on("register_pos_profile", (data) => {\n      this.pos_profile = data.pos_profile;\n      this.customer = data.pos_profile.customer;\n      this.pos_opening_shift = data.pos_opening_shift;\n    });\n    evntBus.$on("add_item", (item) => {\n      // this.expanded = []\n      this.add_item(item);\n    });\n    evntBus.$on("update_customer", (customer) => {\n      this.customer = customer;\n    });\n    evntBus.$on("new_invoice", () => {\n      this.invoice_doc = "";\n      this.cancel_invoice();\n    });\n    evntBus.$on("load_invoice", (data) => {\n      this.new_invoice(data);\n    });\n  },\n  mounted: function () {},\n  watch: {\n    customer() {\n      this.close_payments();\n      evntBus.$emit("set_customer", this.customer);\n      this.fetch_customer_details();\n      // this.get_loyalty();\n    },\n    expanded(data_value) {\n      this.update_items_details(data_value);\n    },\n  },\n};\n<\/script>\n\n<style scoped>\n.border_line_bottom {\n  border-bottom: 1px solid lightgray;\n}\n</style>']},media:void 0})},l,"data-v-ba8a1ac4",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var a=o?i.media||"default":e,s=n[a]||(n[a]={ids:[],parts:[],element:void 0});if(!s.ids.includes(e)){var c=i.source,r=s.ids.length;if(s.ids.push(e),o&&(s.element=s.element||document.querySelector("style[data-group="+a+"]")),!s.element){var l=s.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),o&&(l.setAttribute("data-group",a),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(o&&(r=parseInt(s.element.getAttribute("data-next-index")),s.element.setAttribute("data-next-index",r+1)),s.element.styleSheet)s.parts.push(c),s.element.styleSheet.cssText=s.parts.filter(Boolean).join("\n");else{var d=document.createTextNode(c),m=s.element.childNodes;m[r]&&s.element.removeChild(m[r]),m.length?s.element.insertBefore(d,m[r]):s.element.appendChild(d)}}}}}),p={props:["dialog"],data:function(){return{dialog_data:{},companys:[],company:"",pos_profiles_data:[],pos_profiles:[],pos_profile:"",payments_method_data:[],payments_methods:[],payments_methods_headers:[{text:"Mode of Payment",align:"start",sortable:!1,value:"mode_of_payment"},{text:"Opening Amount",value:"amount",align:"center",sortable:!1}],itemsPerPage:100,max25chars:function(e){return e.length<=12||"Input too long!"},pagination:{},snack:!1,snackColor:"",snackText:""}},watch:{company:function(e){var t=this;this.pos_profiles=[],this.pos_profiles_data.forEach(function(n){n.company===e&&t.pos_profiles.push(n.name),t.pos_profiles.length?t.pos_profile=t.pos_profiles[0]:t.pos_profile=""})},pos_profile:function(e){var t=this;this.payments_methods=[],this.payments_method_data.forEach(function(n){n.parent===e&&t.payments_methods.push({mode_of_payment:n.mode_of_payment,amount:0})})}},methods:{close_opening_dialog:function(){e.$emit("close_opening_dialog")},get_opening_dialog_data:function(){var e=this;frappe.call({method:"posawesome.posawesome.api.posapp.get_opening_dialog_data",args:{},callback:function(t){t.message&&(t.message.companys.forEach(function(t){e.companys.push(t.name)}),e.company=e.companys[0],e.pos_profiles_data=t.message.pos_profiles_data,e.payments_method_data=t.message.payments_method)}})},submit_dialog:function(){if(this.payments_methods.length&&this.company&&this.pos_profile){var t=this;return frappe.call("posawesome.posawesome.api.posapp.create_opening_voucher",{pos_profile:this.pos_profile,company:this.company,balance_details:this.payments_methods}).then(function(n){n.message&&(e.$emit("register_pos_data",n.message),e.$emit("set_company",n.message.company),t.close_opening_dialog())})}},save:function(){},cancel:function(){},open:function(){},close:function(){}},created:function(){this.$nextTick(function(){this.get_opening_dialog_data()})}},u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Create POS Opening Shift")])]),e._v(" "),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-autocomplete",{attrs:{items:e.companys,label:"Company",required:""},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-autocomplete",{attrs:{items:e.pos_profiles,label:"POS Profile",required:""},model:{value:e.pos_profile,callback:function(t){e.pos_profile=t},expression:"pos_profile"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.payments_methods_headers,items:e.payments_methods,"item-key":"mode_of_payment","items-per-page":e.itemsPerPage,"hide-default-footer":""},scopedSlots:e._u([{key:"item.amount",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.amount},on:{"update:returnValue":function(n){return e.$set(t.item,"amount",n)},"update:return-value":function(n){return e.$set(t.item,"amount",n)},save:e.save,cancel:e.cancel,open:e.open,close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max25chars],label:"Edit","single-line":"",counter:"",type:"number"},model:{value:t.item.amount,callback:function(n){e.$set(t.item,"amount",n)},expression:"props.item.amount"}})]},proxy:!0}],null,!0)},[e._v("\n                      "+e._s(t.item.amount)+"\n                      ")])]}}])})]],2)],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue",dark:""},on:{click:e.submit_dialog}},[e._v("Submit")])],1)],1)],1)],1)};u._withStripped=!0;var _=function(e,t,n,o,i,a,s,c){var r=("function"==typeof n?n.options:n)||{};return r.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/OpeningDialog.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,i&&(r.functional=!0)),r._scopeId=o,r}({render:u,staticRenderFns:[]},0,p,void 0,!1),v={data:function(){return{loading:!1,pos_profile:"",invoice_doc:"",loyalty_amount:0}},methods:{back_to_invoice:function(){e.$emit("show_payment","false")},submit:function(){this.submit_invoice(),e.$emit("new_invoice","false"),this.back_to_invoice()},submit_invoice:function(){var t=this;frappe.call({method:"posawesome.posawesome.api.posapp.submit_invoice",args:{data:this.invoice_doc,to_submit:"True"},async:!0,callback:function(n){n.message&&(t.load_print_page(),e.$emit("show_mesage",{text:"Invoice "+n.message.name+" Submited",color:"success"}))}})},submit_full_payment:function(e){var t=this;this.invoice_doc.payments.forEach(function(n){n.amount=n.idx==e?t.invoice_doc.grand_total:0}),this.submit()},load_print_page:function(){var e=this.pos_profile.letter_head||0,t=frappe.urllib.get_base_url()+"/printview?doctype=Sales%20Invoice&name="+this.invoice_doc.name+"&format="+this.pos_profile.print_format+"&no_letterhead="+e,n=window.open(t,"Print");n.addEventListener("load",function(){n.print()},!0)}},computed:{total_payments:function(){var e=flt(this.invoice_doc.loyalty_amount);return this.invoice_doc.payments.forEach(function(t){e+=flt(t.amount)}),e},diff_payment:function(){return this.invoice_doc.grand_total-this.total_payments},diff_lable:function(){return this.diff_payment<0?"Change":"To Be Paid"},available_pioints_amount:function(){var e=0;return this.invoice_doc.customer_info.loyalty_points&&(e=this.invoice_doc.customer_info.loyalty_points/this.invoice_doc.customer_info.conversion_factor),e}},created:function(){this.$nextTick(function(){var t=this;e.$on("send_invoice_doc_payment",function(e){t.invoice_doc=e,t.invoice_doc.payments.find(function(e){return 1==e.default}).amount=e.grand_total,t.loyalty_amount=0}),e.$on("register_pos_profile",function(e){t.pos_profile=e.pos_profile})})},watch:{loyalty_amount:function(t){t>this.available_pioints_amount?(this.invoice_doc.loyalty_amount=0,this.invoice_doc.redeem_loyalty_points=0,this.invoice_doc.loyalty_points=0,e.$emit("show_mesage",{text:"Loyalty Amount can not be more then "+this.available_pioints_amount,color:"error"})):(this.invoice_doc.loyalty_amount=flt(this.loyalty_amount),this.invoice_doc.redeem_loyalty_points=1,this.invoice_doc.loyalty_points=flt(this.loyalty_amount)*this.invoice_doc.customer_info.conversion_factor)}}},f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",{staticClass:"selection mx-auto grey lighten-5",staticStyle:{"max-height":"80vh",height:"80vh"}},[n("v-progress-linear",{attrs:{active:e.loading,indeterminate:e.loading,absolute:"",top:"",color:"deep-purple accent-4"}}),e._v(" "),e._l(e.invoice_doc.payments,function(t){return n("v-row",{key:t.name,staticClass:"pyments px-1 py-0"},[n("v-col",{attrs:{cols:"7"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:t.mode_of_payment,"background-color":"white","hide-details":"",type:"number",prefix:e.invoice_doc.currency},model:{value:t.amount,callback:function(n){e.$set(t,"amount",n)},expression:"payment.amount"}})],1),e._v(" "),n("v-col",{attrs:{cols:"5"}},[n("v-btn",{attrs:{block:"",color:"primary",dark:""},on:{click:function(n){return e.submit_full_payment(t.idx)}}},[e._v("Submit "+e._s(t.mode_of_payment))])],1)],1)}),e._v(" "),e.invoice_doc&&e.available_pioints_amount>0?n("v-row",{staticClass:"pyments px-1 py-0"},[n("v-col",{attrs:{cols:"7"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Redeem Loyalty Points","background-color":"white","hide-details":"",type:"number",prefix:e.invoice_doc.currency},model:{value:e.loyalty_amount,callback:function(t){e.loyalty_amount=t},expression:"loyalty_amount"}})],1),e._v(" "),n("v-col",{attrs:{cols:"5"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"You can redeem upto","background-color":"white","hide-details":"",type:"number",prefix:e.invoice_doc.currency,disabled:""},model:{value:e.available_pioints_amount,callback:function(t){e.available_pioints_amount=t},expression:"available_pioints_amount"}})],1)],1):e._e(),e._v(" "),n("v-divider"),e._v(" "),n("v-row",{staticClass:"px-1 py-0"},[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Net Total","background-color":"white","hide-details":"",type:"number",disabled:"",prefix:e.invoice_doc.currency},model:{value:e.invoice_doc.net_total,callback:function(t){e.$set(e.invoice_doc,"net_total",t)},expression:"invoice_doc.net_total"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Tax and Charges","background-color":"white","hide-details":"",type:"number",disabled:"",prefix:e.invoice_doc.currency},model:{value:e.invoice_doc.total_taxes_and_charges,callback:function(t){e.$set(e.invoice_doc,"total_taxes_and_charges",t)},expression:"invoice_doc.total_taxes_and_charges"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Totoal Amount","background-color":"white","hide-details":"",type:"number",disabled:"",prefix:e.invoice_doc.currency},model:{value:e.invoice_doc.total,callback:function(t){e.$set(e.invoice_doc,"total",t)},expression:"invoice_doc.total"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Discount Amount","background-color":"white","hide-details":"",type:"number",disabled:"",prefix:e.invoice_doc.currency},model:{value:e.invoice_doc.discount_amount,callback:function(t){e.$set(e.invoice_doc,"discount_amount",t)},expression:"invoice_doc.discount_amount"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{dense:"",outlined:"",color:"indigo",label:"Grand Amount","background-color":"white","hide-details":"",type:"number",disabled:"",prefix:e.invoice_doc.currency},model:{value:e.invoice_doc.grand_total,callback:function(t){e.$set(e.invoice_doc,"grand_total",t)},expression:"invoice_doc.grand_total"}})],1)],1),e._v(" "),n("v-divider"),e._v(" "),e.invoice_doc?n("v-row",{staticClass:"px-1 py-0"},[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{outlined:"",color:"indigo",label:"Paid Amount","background-color":"white","hide-details":"",type:"number",readonly:"",prefix:e.invoice_doc.currency},model:{value:e.total_payments,callback:function(t){e.total_payments=t},expression:"total_payments"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{outlined:"",color:"indigo",label:e.diff_lable,"background-color":"white","hide-details":"",type:"number",disabled:"",prefix:e.invoice_doc.currency},model:{value:e.diff_payment,callback:function(t){e.diff_payment=t},expression:"diff_payment"}})],1)],1):e._e()],2),e._v(" "),n("v-card",{staticClass:"cards mb-0 mt-3 py-0",staticStyle:{"max-height":"10vh",height:"10vh"},attrs:{flat:""}},[n("v-row",{staticStyle:{height:"53%"},attrs:{align:"start","no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("v-btn",{staticClass:"pa-1",attrs:{block:"",large:"",color:"warning",dark:""},on:{click:e.back_to_invoice}},[e._v("Back")])],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-btn",{staticClass:"mt-2",attrs:{block:"",large:"",color:"primary",dark:""},on:{click:e.submit}},[e._v("Submit Payments")])],1)],1)],1)],1)};f._withStripped=!0;var h=function(e,t,n,o,i,a,s,c){var r=("function"==typeof n?n.options:n)||{};return r.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/Payments.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,i&&(r.functional=!0)),r._scopeId=o,r}({render:f,staticRenderFns:[]},0,v,void 0,!1),g={data:function(){return{draftsDialog:!1,singleSelect:!0,selected:[],dialog_data:{},headers:[{text:"Customer",value:"customer",align:"start",sortable:!0},{text:"Date",align:"start",sortable:!0,value:"posting_date"},{text:"Invoice",value:"name",align:"start",sortable:!0},{text:"Amount",value:"total",align:"start",sortable:!1}]}},watch:{},methods:{close_dialog:function(){this.draftsDialog=!1},submit_dialog:function(){this.selected.length>0&&(e.$emit("load_invoice",this.selected[0]),this.draftsDialog=!1)}},created:function(){var t=this;e.$on("open_drafts",function(e){t.draftsDialog=!0,t.dialog_data=e})}},y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{"max-width":"800px"},model:{value:e.draftsDialog,callback:function(t){e.draftsDialog=t},expression:"draftsDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Select Hold invoice")])]),e._v(" "),n("v-card-text",{staticClass:"pa-0"},[n("v-container",[n("v-row",[n("v-col",{staticClass:"pa-1",attrs:{cols:"12"}},[[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.dialog_data,"item-key":"name","single-select":e.singleSelect,"show-select":""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})]],2)],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"red",dark:""},on:{click:e.close_dialog}},[e._v("Close")]),e._v(" "),n("v-btn",{attrs:{color:"blue",dark:""},on:{click:e.submit_dialog}},[e._v("Select")])],1)],1)],1)],1)};y._withStripped=!0;var b=function(e,t,n,o,i,a,s,c){var r=("function"==typeof n?n.options:n)||{};return r.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/Drafts.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,i&&(r.functional=!0)),r._scopeId=o,r}({render:y,staticRenderFns:[]},0,g,void 0,!1),x={data:function(){return{closingDialog:!1,itemsPerPage:20,dialog_data:{},headers:[{text:"Mode of Payment",value:"mode_of_payment",align:"start",sortable:!0},{text:"Opening Amount",align:"end",sortable:!0,value:"opening_amount"},{text:"Closing Amount",value:"closing_amount",align:"end",sortable:!0},{text:"Expected Amount",value:"expected_amount",align:"end",sortable:!1},{text:"Difference",value:"difference",align:"end",sortable:!1}],max25chars:function(e){return e.length<=20||"Input too long!"},pagination:{}}},watch:{},methods:{close_dialog:function(){this.closingDialog=!1},submit_dialog:function(){e.$emit("submit_closing_pos",this.dialog_data),this.closingDialog=!1}},created:function(){var t=this;e.$on("open_ClosingDialog",function(e){t.closingDialog=!0,t.dialog_data=e})}},w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{"max-width":"900px"},model:{value:e.closingDialog,callback:function(t){e.closingDialog=t},expression:"closingDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Closing POS Shift")])]),e._v(" "),n("v-card-text",{staticClass:"pa-0"},[n("v-container",[n("v-row",[n("v-col",{staticClass:"pa-1",attrs:{cols:"12"}},[[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.dialog_data.payment_reconciliation,"item-key":"mode_of_payment","items-per-page":e.itemsPerPage,"hide-default-footer":""},scopedSlots:e._u([{key:"item.closing_amount",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.closing_amount},on:{"update:returnValue":function(n){return e.$set(t.item,"closing_amount",n)},"update:return-value":function(n){return e.$set(t.item,"closing_amount",n)}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max25chars],label:"Edit","single-line":"",counter:"",type:"number"},model:{value:t.item.closing_amount,callback:function(n){e.$set(t.item,"closing_amount",n)},expression:"props.item.closing_amount"}})]},proxy:!0}],null,!0)},[e._v("\n                      "+e._s(t.item.closing_amount)+"\n                      ")])]}},{key:"item.difference",fn:function(t){var n=t.item;return[e._v(e._s(n.difference=n.expected_amount-n.closing_amount))]}}])})]],2)],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"red",dark:""},on:{click:e.close_dialog}},[e._v("Close")]),e._v(" "),n("v-btn",{attrs:{color:"blue",dark:""},on:{click:e.submit_dialog}},[e._v("Submit")])],1)],1)],1)],1)};w._withStripped=!0;var k={data:function(){return{dialog:!1,pos_profile:"",pos_opening_shift:"",payment:!1}},components:{ItemsSelector:s,Invoice:m,OpeningDialog:_,Payments:h,Drafts:b,ClosingDialog:function(e,t,n,o,i,a,s,c){var r=("function"==typeof n?n.options:n)||{};return r.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/ClosingDialog.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,i&&(r.functional=!0)),r._scopeId=o,r}({render:w,staticRenderFns:[]},0,x,void 0,!1)},methods:{check_opening_entry:function(){var t=this;return frappe.call("posawesome.posawesome.api.posapp.check_opening_shift",{user:frappe.session.user}).then(function(n){n.message?(t.pos_profile=n.message.pos_profile,t.pos_opening_shift=n.message.pos_opening_shift,e.$emit("register_pos_profile",n.message),e.$emit("set_company",n.message.company),console.log("LoadPosProfile")):t.create_opening_voucher()})},create_opening_voucher:function(){console.log("Opening Shift"),this.dialog=!0},get_closing_data:function(){return frappe.call("posawesome.posawesome.doctype.pos_closing_shift.pos_closing_shift.make_closing_shift_from_opening",{opening_shift:this.pos_opening_shift}).then(function(t){t.message?e.$emit("open_ClosingDialog",t.message):console.log(t)})},submit_closing_pos:function(t){var n=this;frappe.call("posawesome.posawesome.doctype.pos_closing_shift.pos_closing_shift.submit_closing_shift",{closing_shift:t}).then(function(t){t.message?(e.$emit("show_mesage",{text:"POS Shift Closed",color:"success"}),n.check_opening_entry()):console.log(t)})}},created:function(){this.$nextTick(function(){var t=this;this.check_opening_entry(),e.$on("close_opening_dialog",function(){t.dialog=!1}),e.$on("register_pos_data",function(n){t.pos_profile=n.pos_profile,t.pos_opening_shift=n.pos_opening_shift,e.$emit("register_pos_profile",n),console.log("LoadPosProfile")}),e.$on("show_payment",function(n){t.payment="true"===n,e.$emit("update_cur_items_details")}),e.$on("open_closing_dialog",function(){t.get_closing_data()}),e.$on("submit_closing_pos",function(e){t.submit_closing_pos(e)})})}},C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{fluid:""}},[n("ClosingDialog"),e._v(" "),n("Drafts"),e._v(" "),e.dialog?n("OpeningDialog",{attrs:{dialog:e.dialog}}):e._e(),e._v(" "),n("v-row",{directives:[{name:"show",rawName:"v-show",value:!e.dialog,expression:"!dialog"}]},[n("v-col",{directives:[{name:"show",rawName:"v-show",value:!e.payment,expression:"!payment"}],staticClass:"pos pr-0",attrs:{xl:"5",lg:"6",md:"6",sm:"6",cols:"12"}},[n("ItemsSelector")],1),e._v(" "),n("v-col",{directives:[{name:"show",rawName:"v-show",value:e.payment,expression:"payment"}],staticClass:"pos pr-0",attrs:{xl:"5",lg:"6",md:"6",sm:"6",cols:"12"}},[n("Payments")],1),e._v(" "),n("v-col",{staticClass:"pos",attrs:{xl:"7",lg:"6",md:"6",sm:"6",cols:"12"}},[n("Invoice")],1)],1)],1)};C._withStripped=!0;var S={data:function(){return{page:"POS"}},components:{Navbar:o,POS:function(e,t,n,o,i,a,s,c){var r,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/Pos.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=o,t&&(r=function(e){t.call(this,s(e))}),void 0!==r)if(l.functional){var d=l.render;l.render=function(e,t){return r.call(t),d(e,t)}}else{var m=l.beforeCreate;l.beforeCreate=m?[].concat(m,r):[r]}return l}({render:C,staticRenderFns:[]},function(e){e&&e("data-v-1a3ac435_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"Pos.vue"},media:void 0})},k,"data-v-1a3ac435",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var a=o?i.media||"default":e,s=n[a]||(n[a]={ids:[],parts:[],element:void 0});if(!s.ids.includes(e)){var c=i.source,r=s.ids.length;if(s.ids.push(e),o&&(s.element=s.element||document.querySelector("style[data-group="+a+"]")),!s.element){var l=s.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),o&&(l.setAttribute("data-group",a),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(o&&(r=parseInt(s.element.getAttribute("data-next-index")),s.element.setAttribute("data-next-index",r+1)),s.element.styleSheet)s.parts.push(c),s.element.styleSheet.cssText=s.parts.filter(Boolean).join("\n");else{var d=document.createTextNode(c),m=s.element.childNodes;m[r]&&s.element.removeChild(m[r]),m.length?s.element.insertBefore(d,m[r]):s.element.appendChild(d)}}}}})},methods:{setPage:function(e){this.page=e}}},P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"container1"},[n("v-main",[n("Navbar",{on:{changePage:function(t){return e.setPage(t)}}}),e._v(" "),n("keep-alive",[n(e.page,{tag:"component",staticClass:"mx-4 md-4"})],1)],1)],1)};P._withStripped=!0;var A=function(e,t,n,o,i,a,s,c){var r,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/Home.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=o,t&&(r=function(e){t.call(this,s(e))}),void 0!==r)if(l.functional){var d=l.render;l.render=function(e,t){return r.call(t),d(e,t)}}else{var m=l.beforeCreate;l.beforeCreate=m?[].concat(m,r):[r]}return l}({render:P,staticRenderFns:[]},function(e){e&&e("data-v-33623ab8_0",{source:"\n.container1[data-v-33623ab8] {\n  margin-top: 0px;\n}\n",map:{version:3,sources:["/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/Home.vue"],names:[],mappings:";AAkCA;EACA,eAAA;AACA",file:"Home.vue",sourcesContent:['<template>\n  <v-app class="container1">\n    <v-main>\n      <Navbar @changePage="setPage($event)"></Navbar>\n      <keep-alive>\n        <component v-bind:is="page" class="mx-4 md-4"></component>\n      </keep-alive>\n    </v-main>\n  </v-app>\n</template>\n\n<script>\nimport Navbar from "./components/Navbar.vue";\nimport POS from "./components/pos/Pos.vue";\n\nexport default {\n  data: function () {\n    return {\n      page: "POS",\n    };\n  },\n  components: {\n    Navbar,\n    POS,\n  },\n  methods: {\n    setPage(page) {\n      this.page = page;\n    },\n  },\n};\n<\/script>\n\n<style scoped>\n.container1 {\n  margin-top: 0px;\n}\n</style>']},media:void 0})},S,"data-v-33623ab8",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var a=o?i.media||"default":e,s=n[a]||(n[a]={ids:[],parts:[],element:void 0});if(!s.ids.includes(e)){var c=i.source,r=s.ids.length;if(s.ids.push(e),o&&(s.element=s.element||document.querySelector("style[data-group="+a+"]")),!s.element){var l=s.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),o&&(l.setAttribute("data-group",a),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(o&&(r=parseInt(s.element.getAttribute("data-next-index")),s.element.setAttribute("data-next-index",r+1)),s.element.styleSheet)s.parts.push(c),s.element.styleSheet.cssText=s.parts.filter(Boolean).join("\n");else{var d=document.createTextNode(c),m=s.element.childNodes;m[r]&&s.element.removeChild(m[r]),m.length?s.element.insertBefore(d,m[r]):s.element.appendChild(d)}}}}});frappe.provide("frappe.PosApp"),frappe.PosApp.posapp=class{constructor(e){var t=e.parent;this.$parent=$(document),this.page=t.page,this.make_body()}make_body(){this.$customer_table_container=this.$parent.find("#body_div"),this.vue=new Vue({vuetify:new Vuetify,el:this.$customer_table_container[0],data:{},render:function(e){return e(A)}})}setup_header(){}}}();
//# sourceMappingURL=posapp.min.js.map
