!function(){"use strict";var e={data:function(){return{drawer:!0,mini:!0,item:0,items:[{text:"Dashboard",icon:"mdi-view-dashboard"},{text:"POS",icon:"mdi-point-of-sale"},{text:"Customer",icon:"mdi-account-box-multiple"},{text:"Closing",icon:"mdi-folder-open"}],page:"",fav:!0,menu:!1,message:!1,hints:!0}},methods:{changePage:function(e){this.$emit("changePage",e)},go_to:function(){frappe.set_route("workspace","home"),location.reload()}}},t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",[n("v-app-bar",{staticClass:"elevation-2",attrs:{app:"",height:"40"}},[n("v-app-bar-nav-icon",{staticClass:"grey--text",on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}}),e._v(" "),n("v-toolbar-title",{staticClass:"text-uppercase indigo--text"},[n("span",{staticClass:"font-weight-light"},[e._v("pos")]),e._v(" "),n("span",[e._v("awesome")])]),e._v(" "),n("v-spacer"),e._v(" "),n("div",{staticClass:"text-center"},[n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[n("v-btn",e._g(e._b({attrs:{color:"grey",dark:"",text:""}},"v-btn",s,!1),a),[e._v("Pages")])]}}])},[e._v(" "),n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300",tile:""}},[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{attrs:{color:"primary"},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}},e._l(e.items,function(t,a){return n("v-list-item",{key:t.text,on:{click:function(n){e.changePage(t.text),t=a}}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:e._s(t.icon)}})],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.text)}})],1)],1)}),1)],1)],1)],1)],1),e._v(" "),n("v-btn",{attrs:{text:"",color:"grey"},on:{click:e.go_to}},[n("span",{attrs:{right:""}},[e._v("Erpnext")])])],1),e._v(" "),n("v-navigation-drawer",{staticClass:"indigo margen-top",attrs:{"mini-variant":e.mini,app:""},on:{"update:miniVariant":function(t){e.mini=t},"update:mini-variant":function(t){e.mini=t}},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{dark:""}},[n("v-list-item",{staticClass:"px-2"},[n("v-list-item-avatar",[n("v-img",{attrs:{src:"/assets/erpnext/images/erp-icon.svg"}})],1),e._v(" "),n("v-list-item-title",[e._v("John Leider")]),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}},[n("v-icon",[e._v("mdi-chevron-left")])],1)],1),e._v(" "),n("v-list-item-group",{attrs:{color:"white"},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}},e._l(e.items,function(t){return n("v-list-item",{key:t.text,on:{click:function(n){return e.changePage(t.text)}}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:e._s(t.icon)}})],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.text)}})],1)],1)}),1)],1)],1)],1)};t._withStripped=!0;var n=function(e,t,n,a,s,i,o,r){var l,c=("function"==typeof n?n.options:n)||{};if(c.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/Navbar.vue",c.render||(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),c._scopeId=a,t&&(l=function(e){t.call(this,o(e))}),void 0!==l)if(c.functional){var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var m=c.beforeCreate;c.beforeCreate=m?[].concat(m,l):[l]}return c}({render:t,staticRenderFns:[]},function(e){e&&e("data-v-5e3fc116_0",{source:"\n.margen-top[data-v-5e3fc116] {\n  margin-top: 0px;\n}\n",map:{version:3,sources:["/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/Navbar.vue"],names:[],mappings:";AA0GA;EACA,eAAA;AACA",file:"Navbar.vue",sourcesContent:['<template>\n  <nav>\n    <v-app-bar app height="40" class="elevation-2">\n      <v-app-bar-nav-icon @click.stop="mini = !mini" class="grey--text"></v-app-bar-nav-icon>\n      <v-toolbar-title class="text-uppercase indigo--text">\n        <span class="font-weight-light">pos</span>\n        <span>awesome</span>\n      </v-toolbar-title>\n\n      <v-spacer></v-spacer>\n\n      <div class="text-center">\n        <v-menu offset-y>\n          <template v-slot:activator="{ on, attrs }">\n            <v-btn color="grey" dark text v-bind="attrs" v-on="on">Pages</v-btn>\n          </template>\n          <v-card class="mx-auto" max-width="300" tile>\n            <v-list dense>\n              <v-list-item-group v-model="item" color="primary">\n                <v-list-item\n                  v-for="(item, index) in items"\n                  :key="item.text"\n                  @click="[changePage(item.text), item = index]"\n                >\n                  <v-list-item-icon>\n                    <v-icon v-text="item.icon"></v-icon>\n                  </v-list-item-icon>\n                  <v-list-item-content>\n                    <v-list-item-title v-text="item.text"></v-list-item-title>\n                  </v-list-item-content>\n                </v-list-item>\n              </v-list-item-group>\n            </v-list>\n          </v-card>\n        </v-menu>\n      </div>\n      <v-btn text color="grey" @click="go_to">\n        <span right>Erpnext</span>\n      </v-btn>\n    </v-app-bar>\n    <v-navigation-drawer v-model="drawer" :mini-variant.sync="mini" app class="indigo margen-top">\n      <v-list dark>\n        <v-list-item class="px-2">\n          <v-list-item-avatar>\n            <v-img src="/assets/erpnext/images/erp-icon.svg"></v-img>\n          </v-list-item-avatar>\n\n          <v-list-item-title>John Leider</v-list-item-title>\n\n          <v-btn icon @click.stop="mini = !mini">\n            <v-icon>mdi-chevron-left</v-icon>\n          </v-btn>\n        </v-list-item>\n        \x3c!-- <MyPopup/> --\x3e\n        <v-list-item-group v-model="item" color="white">\n          <v-list-item v-for="item in items" :key="item.text" @click="changePage(item.text)">\n            <v-list-item-icon>\n              <v-icon v-text="item.icon"></v-icon>\n            </v-list-item-icon>\n            <v-list-item-content>\n              <v-list-item-title v-text="item.text"></v-list-item-title>\n            </v-list-item-content>\n          </v-list-item>\n        </v-list-item-group>\n      </v-list>\n    </v-navigation-drawer>\n  </nav>\n</template>\n\n<script>\n// import MyPopup from \'./MyPopup.vue\';\n\nexport default {\n  // components: {MyPopup},\n  data() {\n    return {\n      drawer: true,\n      mini: true,\n      item: 0,\n      items: [\n        { text: "Dashboard", icon: "mdi-view-dashboard" },\n        { text: "POS", icon: "mdi-point-of-sale" },\n        { text: "Customer", icon: "mdi-account-box-multiple" },\n        { text: "Closing", icon: "mdi-folder-open" },\n      ],\n      page: "",\n      fav: true,\n      menu: false,\n      message: false,\n      hints: true,\n    };\n  },\n  methods: {\n    changePage(key) {\n      this.$emit("changePage", key);\n    },\n    go_to() {\n      //  window.location = document.location.href.substring(0,document.location.href.length - 6);\n      frappe.set_route("workspace", "home");\n      location.reload();\n    },\n  },\n};\n<\/script>\n\n<style scoped>\n.margen-top {\n  margin-top: 0px;\n}\n</style>']},media:void 0})},e,"data-v-5e3fc116",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,s){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var i=a?s.media||"default":e,o=n[i]||(n[i]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=s.source,l=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+i+"]")),!o.element){var c=o.element=document.createElement("style");c.type="text/css",s.media&&c.setAttribute("media",s.media),a&&(c.setAttribute("data-group",i),c.setAttribute("data-next-index","0")),t.appendChild(c)}if(a&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var d=document.createTextNode(r),m=o.element.childNodes;m[l]&&o.element.removeChild(m[l]),m.length?o.element.insertBefore(d,m[l]):o.element.appendChild(d)}}}}}),a=new Vue,s={data:function(){return{items_view:"list",item_group:"ALL",favourites_view:!1,loading:!1,items_group:["ALL"],items:[],search:"",itemsPerPage:1e3,items_headers:[{text:"Name",align:"start",sortable:!0,value:"item_name"},{text:"VAT",value:"vat",align:"start"},{text:"UOM",value:"stock_uom",align:"start"},{text:"Price",value:"price",align:"start"}]}},methods:{get_items:function(){var e=this;this.loading=!0,localStorage.items_storage&&(e.items=JSON.parse(localStorage.getItem("items_storage")),e.loading=!1),frappe.call({method:"posawesome.posawesome.api.posapp.get_items",args:{},callback:function(t){if(t.message){var n=!localStorage.items_storage||JSON.parse(localStorage.getItem("items_storage")).length!=t.message.length;localStorage.setItem("items_storage",""),localStorage.setItem("items_storage",JSON.stringify(t.message)),n&&e.$nextTick(function(){console.log("loadItmes",n),e.items=JSON.parse(localStorage.getItem("items_storage")),e.loading=!1})}}})},get_items_groups:function(){var e=this;frappe.call({method:"posawesome.posawesome.api.posapp.get_items_groups",args:{},callback:function(t){t.message&&t.message.forEach(function(t){e.items_group.push(t.name)})}})},add_item:function(e){a.$emit("add_item",e)},enter_event:function(){this.filtred_items.length&&this.search&&(this.add_item(this.filtred_items[0]),this.search=null)},esc_event:function(){this.search=null}},computed:{filtred_items:function(){var e=this,t=[],n=[];return n="ALL"!=this.item_group?this.items.filter(function(t){return t.item_group.toLowerCase().includes(e.item_group.toLowerCase())}):this.items,!this.search||this.search.length<3?n.slice(0,100):(this.search&&0==(t=n.filter(function(t){return t.item_name.toLowerCase().includes(e.search.toLowerCase())})).length&&(t=n.filter(function(t){return t.item_code.toLowerCase().includes(e.search.toLowerCase())})),t.slice(0,100))}},created:function(){this.$nextTick(function(){this.get_items(),this.get_items_groups()})}},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",{staticClass:"selection mx-auto grey lighten-5",staticStyle:{"max-height":"80vh",height:"80vh"}},[n("v-row",{staticClass:"items px-2 py-1"},[n("v-col",{staticClass:"pb-0 mb-2",attrs:{cols:"12"}},[n("v-text-field",{attrs:{dense:"",clearable:"",autofocus:"",outlined:"",color:"indigo",label:"Serch Items",hint:"Search by item code, serial number, batch no or barcode","background-color":"white","hide-details":""},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter_event(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.esc_event(t)}]},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-col",{staticClass:"pt-0 mt-0",attrs:{cols:"12"}},["card"==e.items_view?n("div",{staticClass:"items",attrs:{fluid:""}},[n("v-row",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"68vh"},attrs:{dense:""}},[n("v-progress-linear",{attrs:{active:e.loading,indeterminate:e.loading,absolute:"",top:"",color:"deep-purple accent-4"}}),e._v(" "),e._l(e.filtred_items,function(t,a){return n("v-col",{key:a,attrs:{xl:"2",lg:"3",md:"6",sm:"6",cols:"6","min-height":"50"}},[n("v-card",{attrs:{hover:"hover"},on:{click:function(n){return e.add_item(t)}}},[n("v-img",{staticClass:"white--text align-end",attrs:{src:t.image||"https://lunawood.com/wp-content/uploads/2018/02/placeholder-image.png",gradient:"to bottom, rgba(0,0,0,.2), rgba(0,0,0,.7)",height:"100px"}},[n("v-card-text",{staticClass:"text-subtitle-2 px-1 pb-2",domProps:{textContent:e._s(t.item_name)}})],1),e._v(" "),n("v-card-text",{staticClass:"text--primary pa-1"},[n("div",{staticClass:"text-caption indigo--text accent-3"},[e._v("$ 50.00")])])],1)],1)})],2)],1):e._e(),e._v(" "),"list"==e.items_view?n("div",{staticClass:"items",attrs:{fluid:""}},[n("div",{staticClass:"my-0 py-0 overflow-y-auto",staticStyle:{"max-height":"68vh"}},[[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.items_headers,items:e.filtred_items,"item-key":"name","items-per-page":e.itemsPerPage,"hide-default-footer":""},on:{"click:row":e.add_item}})]],2)]):e._e()])],1)],1),e._v(" "),n("v-card",{staticClass:"cards mb-0 mt-3 pa-2 grey lighten-5",staticStyle:{"max-height":"10vh",height:"10vh"}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("v-select",{attrs:{items:e.items_group,label:"Items Group",dense:"",outlined:"","hide-details":""},model:{value:e.item_group,callback:function(t){e.item_group=t},expression:"item_group"}})],1),e._v(" "),n("v-col",{staticClass:"mt-1",attrs:{cols:"8"}},[n("v-btn-toggle",{attrs:{color:"primary accent-3",group:"",dense:"",rounded:""},model:{value:e.items_view,callback:function(t){e.items_view=t},expression:"items_view"}},[n("v-btn",{attrs:{value:"card"}},[e._v("Card View")]),e._v(" "),n("v-btn",{attrs:{value:"list"}},[e._v("List View")])],1)],1),e._v(" "),n("v-col",{staticClass:"mt-1",attrs:{cols:"4"}},[n("v-btn-toggle",{attrs:{color:"success accent-3",group:"",dense:"",rounded:""},model:{value:e.favourites_view,callback:function(t){e.favourites_view=t},expression:"favourites_view"}},[n("v-btn",{attrs:{value:"True"}},[e._v("Favourites")])],1)],1)],1)],1)],1)};i._withStripped=!0;var o=function(e,t,n,a,s,i,o,r){var l,c=("function"==typeof n?n.options:n)||{};if(c.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/ItemsSelector.vue",c.render||(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),c._scopeId=a,t&&(l=function(e){t.call(this,o(e))}),void 0!==l)if(c.functional){var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var m=c.beforeCreate;c.beforeCreate=m?[].concat(m,l):[l]}return c}({render:i,staticRenderFns:[]},function(e){e&&e("data-v-634687f5_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"ItemsSelector.vue"},media:void 0})},s,"data-v-634687f5",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,s){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var i=a?s.media||"default":e,o=n[i]||(n[i]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=s.source,l=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+i+"]")),!o.element){var c=o.element=document.createElement("style");c.type="text/css",s.media&&c.setAttribute("media",s.media),a&&(c.setAttribute("data-group",i),c.setAttribute("data-next-index","0")),t.appendChild(c)}if(a&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var d=document.createTextNode(r),m=o.element.childNodes;m[l]&&o.element.removeChild(m[l]),m.length?o.element.insertBefore(d,m[l]):o.element.appendChild(d)}}}}}),r={data:function(){return{cutomers:["Cash Customer","foo","bar","fizz","buzz"],cutomer:""}},methods:{get_customer_names:function(){var e=this;localStorage.customer_storage&&(e.cutomers=JSON.parse(localStorage.getItem("customer_storage"))),frappe.call({method:"posawesome.posawesome.api.posapp.get_customer_names",args:{},callback:function(t){if(t.message){var n=!localStorage.customer_storage||JSON.parse(localStorage.getItem("items_storage")).length!=t.message.length;localStorage.setItem("customer_storage",""),localStorage.setItem("customer_storage",JSON.stringify(t.message)),n&&e.$nextTick(function(){console.log("loadCustomers",n),e.cutomers=JSON.parse(localStorage.getItem("customer_storage"))})}}})}},computed:{},created:function(){this.$nextTick(function(){this.get_customer_names()})}},l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"items px-2 py-1"},[n("v-col",{staticClass:"pb-0 mb-2",attrs:{cols:"12"}},[n("v-autocomplete",{attrs:{dense:"",clearable:"",autofocus:"","auto-select-first":"",outlined:"",color:"indigo",label:"Customer",items:e.cutomers,"append-outer-icon":"mdi-plus","background-color":"white","no-data-text":"Customer not found","hide-details":""},model:{value:e.cutomer,callback:function(t){e.cutomer=t},expression:"cutomer"}})],1)],1)};l._withStripped=!0;var c={props:[],data:function(){return{items_discount:0,additional_discount:0,total_tax:0,total:0,items:[],itemsPerPage:1e3,expanded:[],singleExpand:!0,items_headers:[{text:"Name",align:"start",sortable:!1,value:"item_name"},{text:"QTY",value:"qty",align:"center"},{text:"UOM",value:"stock_uom",align:"center"},{text:"Price",value:"price",align:"center"},{text:"VAT",value:"vat",align:"center"},{text:"Total",value:"total",align:"center"}]}},components:{Customer:function(e,t,n,a,s,i,o,r){var l=("function"==typeof n?n.options:n)||{};return l.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/Customer.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,s&&(l.functional=!0)),l._scopeId=a,l}({render:l,staticRenderFns:[]},0,r,void 0,!1)},computed:{total_qty:function(){var e=0;return this.items.forEach(function(t){e+=t.qty}),e},subtotal:function(){var e=0;return this.items.forEach(function(t){e+=t.qty*t.price}),e}},methods:{remove_item:function(e){var t=this.items.findIndex(function(t){return t===e});this.items.splice(t,1)},add_one:function(e){e.qty++},subtract_one:function(e){e.qty--,e.qty<=0&&this.remove_item(e)},add_item:function(e){var t=this.items.findIndex(function(t){return t.name===e.name});if(-1===t){var n=Object.assign({},e);n.qty=1,n.vat=18,n.price=25,n.active=!1,this.items.unshift(n)}else this.items[t].qty++},cancel_invoice:function(){this.items=[]}},created:function(){var e=this;a.$on("add_item",function(t){e.add_item(t)})},mounted:function(){}},d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",{staticClass:"cards my-0 py-0 grey lighten-5",staticStyle:{"max-height":"70vh",height:"70vh"}},[n("Customer"),e._v(" "),n("div",{staticClass:"my-0 py-0 overflow-y-auto",staticStyle:{"max-height":"59vh"}},[[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.items_headers,items:e.items,"single-expand":e.singleExpand,expanded:e.expanded,"item-key":"name","show-expand":"","items-per-page":e.itemsPerPage,"hide-default-footer":""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"item.total",fn:function(t){var n=t.item;return[e._v(e._s(n.qty*n.price))]}},{key:"expanded-item",fn:function(t){var a=t.headers,s=t.item;return[n("td",{attrs:{colspan:a.length}},[n("v-row",[n("v-col",{attrs:{cols:"1"}},[n("v-btn",{attrs:{icon:"",small:"",color:"red"},on:{click:function(t){return t.stopPropagation(),e.remove_item(s)}}},[n("v-icon",[e._v("mdi-delete")])],1)],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-col",{attrs:{cols:"1"}},[n("v-btn",{attrs:{icon:"",small:"",color:"indigo lighten-1"},on:{click:function(t){return t.stopPropagation(),e.subtract_one(s)}}},[n("v-icon",[e._v("mdi-minus-circle-outline")])],1)],1),e._v(" "),n("v-col",{attrs:{cols:"1"}},[n("v-btn",{attrs:{icon:"",small:"",color:"indigo lighten-1"},on:{click:function(t){return t.stopPropagation(),e.add_one(s)}}},[n("v-icon",[e._v("mdi-plus-circle-outline")])],1)],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("p",[e._v("More info about "+e._s(s.name)+" "+e._s(e.expanded))])])],1)],1)]}}])})]],2)],1),e._v(" "),n("v-row",[n("v-col",{staticClass:"pt-0 pr-0",attrs:{cols:"8"}},[n("v-card",{staticClass:"cards mb-0 mt-3 py-0 grey lighten-5",staticStyle:{"max-height":"20vh",height:"20vh"}},[n("v-row",{staticClass:"pa-1 pt-2",staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"6","no-gutters":""}},[n("v-row",{staticClass:"ma-1 pa-0",staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Total Qty",outlined:"",dense:"",readonly:"","hide-details":""},model:{value:e.total_qty,callback:function(t){e.total_qty=t},expression:"total_qty"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Subtotal",outlined:"",dense:"",readonly:"","hide-details":""},model:{value:e.subtotal,callback:function(t){e.subtotal=t},expression:"subtotal"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Items Discount",outlined:"",dense:"",readonly:"","hide-details":""},model:{value:e.items_discount,callback:function(t){e.items_discount=t},expression:"items_discount"}})],1)],1)],1),e._v(" "),n("v-col",{attrs:{"no-gutters":"",cols:"6"}},[n("v-row",{staticClass:"ma-1 pa-0",staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"ِAdditional Discount",outlined:"",dense:"","hide-details":""},model:{value:e.additional_discount,callback:function(t){e.additional_discount=t},expression:"additional_discount"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"TAX",outlined:"",dense:"",readonly:"","hide-details":""},model:{value:e.total_tax,callback:function(t){e.total_tax=t},expression:"total_tax"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Total",outlined:"",dense:"",readonly:"","hide-details":""},model:{value:e.total,callback:function(t){e.total=t},expression:"total"}})],1)],1)],1)],1)],1)],1),e._v(" "),n("v-col",{staticClass:"pt-0 pr-3",attrs:{cols:"4"}},[n("v-card",{staticClass:"cards mb-0 mt-3 py-0",staticStyle:{"max-height":"20vh",height:"20vh"},attrs:{flat:""}},[n("v-row",{staticStyle:{height:"53%"},attrs:{align:"start"}},[n("v-col",{attrs:{cols:"12"}},[n("v-btn",{staticClass:"pa-0",attrs:{block:"",large:"",color:"warning",dark:""}},[e._v("Get Hold Invoice")])],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-btn",{staticClass:"pa-0",attrs:{block:"",large:"",color:"error",dark:""},on:{click:e.cancel_invoice}},[e._v("Cancel")])],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-btn",{staticClass:"pa-0",attrs:{block:"",large:"",color:"success",dark:""}},[e._v("New")])],1)],1),e._v(" "),n("v-row",{staticStyle:{height:"54%"},attrs:{align:"end"}},[n("v-col",{attrs:{cols:"12"}},[n("v-btn",{staticClass:"pa-0",attrs:{block:"",large:"",color:"primary",dark:""}},[e._v("PAY")])],1)],1)],1)],1)],1)],1)};d._withStripped=!0;var m={data:function(){return{shift_is_open:!1}},components:{ItemsSelector:o,ItemsCrads:function(e,t,n,a,s,i,o,r){var l,c=("function"==typeof n?n.options:n)||{};if(c.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/ItemsCrads.vue",c.render||(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),c._scopeId=a,t&&(l=function(e){t.call(this,o(e))}),void 0!==l)if(c.functional){var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var m=c.beforeCreate;c.beforeCreate=m?[].concat(m,l):[l]}return c}({render:d,staticRenderFns:[]},function(e){e&&e("data-v-d976e11a_0",{source:"\n.border_line_bottom[data-v-d976e11a] {\n  border-bottom: 1px solid lightgray;\n}\n",map:{version:3,sources:["/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/ItemsCrads.vue"],names:[],mappings:";AAiQA;EACA,kCAAA;AACA",file:"ItemsCrads.vue",sourcesContent:['<template>\n  <div>\n    <v-card style="max-height: 70vh; height: 70vh" class="cards my-0 py-0 grey lighten-5">\n      <Customer></Customer>\n      <div class="my-0 py-0 overflow-y-auto" style="max-height: 59vh">\n        <template  @mouseover="style=\'cursor: pointer\'">\n          <v-data-table\n            :headers="items_headers"\n            :items="items"\n            :single-expand="singleExpand"\n            :expanded.sync="expanded"\n            item-key="name"\n            show-expand\n            class="elevation-1"\n            :items-per-page="itemsPerPage"\n            hide-default-footer\n          >\n            <template v-slot:item.total="{ item }">{{ item.qty * item.price }}</template>\n\n            <template v-slot:expanded-item="{ headers, item }">\n              <td :colspan="headers.length">\n                <v-row>\n                  <v-col cols="1">\n                    <v-btn icon small color="red" @click.stop="remove_item(item)">\n                      <v-icon>mdi-delete</v-icon>\n                    </v-btn>\n                  </v-col>\n                   <v-spacer></v-spacer>\n                  <v-col cols="1">\n                    <v-btn icon small color="indigo lighten-1" @click.stop="subtract_one(item)">\n                      <v-icon>mdi-minus-circle-outline</v-icon>\n                    </v-btn>\n                  </v-col>\n                  <v-col cols="1">\n                    <v-btn icon small color="indigo lighten-1" @click.stop="add_one(item)">\n                      <v-icon>mdi-plus-circle-outline</v-icon>\n                    </v-btn>\n                  </v-col>\n                </v-row>\n                <v-row>\n                  <v-col cols="6">\n                    <p>More info about {{ item.name }} {{ expanded }}</p>\n                  </v-col>\n                </v-row>\n              </td>\n            </template>\n          </v-data-table>\n        </template>\n      </div>\n    </v-card>\n    <v-row>\n      <v-col class="pt-0 pr-0" cols="8">\n        <v-card style="max-height: 20vh; height: 20vh" class="cards mb-0 mt-3 py-0 grey lighten-5">\n          <v-row no-gutters class="pa-1 pt-2" style="height: 100%">\n            <v-col cols="6" no-gutters>\n              <v-row no-gutters class="ma-1 pa-0" style="height: 100%">\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="total_qty"\n                    label="Total Qty"\n                    outlined\n                    dense\n                    readonly\n                    hide-details\n                  ></v-text-field>\n                </v-col>\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="subtotal"\n                    label="Subtotal"\n                    outlined\n                    dense\n                    readonly\n                    hide-details\n                  ></v-text-field>\n                </v-col>\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="items_discount"\n                    label="Items Discount"\n                    outlined\n                    dense\n                    readonly\n                    hide-details\n                  ></v-text-field>\n                </v-col>\n              </v-row>\n            </v-col>\n            <v-col no-gutters cols="6">\n              <v-row no-gutters class="ma-1 pa-0" style="height: 100%">\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="additional_discount"\n                    label="ِAdditional Discount"\n                    outlined\n                    dense\n                    hide-details\n                  ></v-text-field>\n                </v-col>\n                <v-col cols="12">\n                  <v-text-field\n                    v-model="total_tax"\n                    label="TAX"\n                    outlined\n                    dense\n                    readonly\n                    hide-details\n                  ></v-text-field>\n                </v-col>\n                <v-col cols="12">\n                  <v-text-field v-model="total" label="Total" outlined dense readonly hide-details></v-text-field>\n                </v-col>\n              </v-row>\n            </v-col>\n          </v-row>\n        </v-card>\n      </v-col>\n      <v-col class="pt-0 pr-3" cols="4">\n        <v-card flat style="max-height: 20vh; height: 20vh" class="cards mb-0 mt-3 py-0">\n          <v-row align="start" style="height: 53%">\n            <v-col cols="12">\n              <v-btn block class="pa-0" large color="warning" dark>Get Hold Invoice</v-btn>\n            </v-col>\n            <v-col cols="6">\n              <v-btn block class="pa-0" large color="error" dark @click="cancel_invoice">Cancel</v-btn>\n            </v-col>\n            <v-col cols="6">\n              <v-btn block class="pa-0" large color="success" dark>New</v-btn>\n            </v-col>\n          </v-row>\n          <v-row align="end" style="height: 54%">\n            <v-col cols="12">\n              <v-btn block class="pa-0" large color="primary" dark>PAY</v-btn>\n            </v-col>\n          </v-row>\n        </v-card>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport { evntBus } from "../../bus";\nimport Customer from "./Customer.vue";\nexport default {\n  props: [\n    // "items"\n  ],\n  data() {\n    return {\n      items_discount: 0,\n      additional_discount: 0,\n      total_tax: 0,\n      total: 0,\n      items: [],\n      itemsPerPage: 1000,\n      expanded: [],\n      singleExpand: true,\n      items_headers: [\n        {\n          text: "Name",\n          align: "start",\n          sortable: false,\n          value: "item_name",\n        },\n        { text: "QTY", value: "qty", align: "center" },\n        { text: "UOM", value: "stock_uom", align: "center" },\n        { text: "Price", value: "price", align: "center" },\n        { text: "VAT", value: "vat", align: "center" },\n        { text: "Total", value: "total", align: "center" },\n      ],\n    };\n  },\n  components: {\n    Customer,\n  },\n  computed: {\n    total_qty() {\n      let qty = 0;\n      this.items.forEach((item) => {\n        qty += item.qty;\n      });\n      return qty;\n    },\n    subtotal() {\n      let sum = 0;\n      this.items.forEach((item) => {\n        sum += item.qty * item.price;\n      });\n      return sum;\n    },\n  },\n  methods: {\n    // sortBy(prop) {\n    //   this.projects.sort((a, b) => (a[prop] < b[prop] ? -1 : 1));\n    // },\n    remove_item(item) {\n      const index = this.items.findIndex((el) => el === item);\n      this.items.splice(index, 1);\n    },\n    add_one(item) {\n      item.qty++;\n      // this.$forceUpdate();\n    },\n    subtract_one(item) {\n      item.qty--;\n      if (item.qty <= 0) {\n        this.remove_item(item);\n      }\n      // this.$forceUpdate();\n    },\n    add_item(item) {\n      const index = this.items.findIndex((el) => el.name === item.name);\n      if (index === -1) {\n        const new_item = { ...item };\n        new_item.qty = 1;\n        new_item.vat = 18;\n        new_item.price = 25;\n        (new_item.active = false), this.items.unshift(new_item);\n      } else {\n        this.items[index].qty++;\n      }\n    },\n    cancel_invoice() {\n      this.items = [];\n    },\n  },\n  created() {\n    evntBus.$on("add_item", (item) => {\n      this.add_item(item);\n    });\n  },\n  mounted: function () {\n    // this.$nextTick(function () {\n    // const vm = this;\n    //     frappe.call({\n    //         method: \'roxtools.roxtools.doctype.myprojects.myprojects.get_all_projects\',\n    //         async: false,\n    //         callback: function(r) {\n    //             if (r.message) {\n    //                 // console.log(r.message);\n    //                 vm.projects = r.message;\n    //             }\n    //         }\n    //     });\n    // })\n    // this.$nextTick(function () {\n    //     const vm = this;\n    //     frappe.realtime.on(\'rox_add_project\', function(data) {\n    //         vm.projects.push(data);\n    //     });\n    // })\n  },\n};\n<\/script>\n\n<style scoped>\n.border_line_bottom {\n  border-bottom: 1px solid lightgray;\n}\n</style>']},media:void 0})},c,"data-v-d976e11a",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,s){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var i=a?s.media||"default":e,o=n[i]||(n[i]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=s.source,l=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+i+"]")),!o.element){var c=o.element=document.createElement("style");c.type="text/css",s.media&&c.setAttribute("media",s.media),a&&(c.setAttribute("data-group",i),c.setAttribute("data-next-index","0")),t.appendChild(c)}if(a&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var d=document.createTextNode(r),m=o.element.childNodes;m[l]&&o.element.removeChild(m[l]),m.length?o.element.insertBefore(d,m[l]):o.element.appendChild(d)}}}}})},methods:{check_opening_entry:function(){var e=this;return frappe.call("posawesome.posawesome.api.posapp.check_opening_shift",{user:frappe.session.user}).then(function(t){console.log(t.message),t.message.length?console.log(t.message):e.create_opening_voucher()})},create_opening_voucher:function(){console.log("create_opening_voucher")}},created:function(){this.$nextTick(function(){this.check_opening_entry()})}},v=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{fluid:""}},[t("v-row",[t("v-col",{staticClass:"pos pr-0",attrs:{xl:"5",lg:"6",md:"6",sm:"6",cols:"12"}},[t("ItemsSelector")],1),this._v(" "),t("v-col",{staticClass:"pos",attrs:{xl:"7",lg:"6",md:"6",sm:"6",cols:"12"}},[t("ItemsCrads")],1)],1)],1)};v._withStripped=!0;var p={data:function(){return{page:"POS"}},components:{Navbar:n,POS:function(e,t,n,a,s,i,o,r){var l,c=("function"==typeof n?n.options:n)||{};if(c.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/components/pos/Pos.vue",c.render||(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),c._scopeId=a,t&&(l=function(e){t.call(this,o(e))}),void 0!==l)if(c.functional){var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var m=c.beforeCreate;c.beforeCreate=m?[].concat(m,l):[l]}return c}({render:v,staticRenderFns:[]},function(e){e&&e("data-v-2c5d908e_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"Pos.vue"},media:void 0})},m,"data-v-2c5d908e",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,s){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var i=a?s.media||"default":e,o=n[i]||(n[i]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=s.source,l=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+i+"]")),!o.element){var c=o.element=document.createElement("style");c.type="text/css",s.media&&c.setAttribute("media",s.media),a&&(c.setAttribute("data-group",i),c.setAttribute("data-next-index","0")),t.appendChild(c)}if(a&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var d=document.createTextNode(r),m=o.element.childNodes;m[l]&&o.element.removeChild(m[l]),m.length?o.element.insertBefore(d,m[l]):o.element.appendChild(d)}}}}})},methods:{setPage:function(e){this.page=e}}},u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"container1"},[n("v-main",[n("Navbar",{on:{changePage:function(t){return e.setPage(t)}}}),e._v(" "),n("keep-alive",[n(e.page,{tag:"component",staticClass:"mx-4 md-4"})],1)],1)],1)};u._withStripped=!0;var h=function(e,t,n,a,s,i,o,r){var l,c=("function"==typeof n?n.options:n)||{};if(c.__file="/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/Home.vue",c.render||(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),c._scopeId=a,t&&(l=function(e){t.call(this,o(e))}),void 0!==l)if(c.functional){var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var m=c.beforeCreate;c.beforeCreate=m?[].concat(m,l):[l]}return c}({render:u,staticRenderFns:[]},function(e){e&&e("data-v-33623ab8_0",{source:"\n.container1[data-v-33623ab8] {\n  margin-top: 0px;\n}\n",map:{version:3,sources:["/home/frappe/bench-13/apps/posawesome/posawesome/public/js/posapp/Home.vue"],names:[],mappings:";AAkCA;EACA,eAAA;AACA",file:"Home.vue",sourcesContent:['<template>\n  <v-app class="container1">\n    <v-main>\n      <Navbar @changePage="setPage($event)"></Navbar>\n      <keep-alive>\n        <component v-bind:is="page" class="mx-4 md-4"></component>\n      </keep-alive>\n    </v-main>\n  </v-app>\n</template>\n\n<script>\nimport Navbar from "./components/Navbar.vue";\nimport POS from "./components/pos/Pos.vue";\n\nexport default {\n  data: function () {\n    return {\n      page: "POS",\n    };\n  },\n  components: {\n    Navbar,\n    POS,\n  },\n  methods: {\n    setPage(page) {\n      this.page = page;\n    },\n  },\n};\n<\/script>\n\n<style scoped>\n.container1 {\n  margin-top: 0px;\n}\n</style>']},media:void 0})},p,"data-v-33623ab8",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,s){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var i=a?s.media||"default":e,o=n[i]||(n[i]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=s.source,l=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+i+"]")),!o.element){var c=o.element=document.createElement("style");c.type="text/css",s.media&&c.setAttribute("media",s.media),a&&(c.setAttribute("data-group",i),c.setAttribute("data-next-index","0")),t.appendChild(c)}if(a&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var d=document.createTextNode(r),m=o.element.childNodes;m[l]&&o.element.removeChild(m[l]),m.length?o.element.insertBefore(d,m[l]):o.element.appendChild(d)}}}}});frappe.provide("frappe.PosApp"),frappe.PosApp.posapp=class{constructor(e){var t=e.parent;this.$parent=$(document),this.page=t.page,this.make_body()}make_body(){this.$customer_table_container=this.$parent.find("#body_div"),this.vue=new Vue({vuetify:new Vuetify,el:this.$customer_table_container[0],data:{},render:function(e){return e(h)}})}setup_header(){}}}();
//# sourceMappingURL=posapp.min.js.map
