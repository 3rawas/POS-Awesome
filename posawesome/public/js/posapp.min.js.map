{"version":3,"file":"posapp.min.js","sources":["../../../../apps/posawesome/posawesome/public/js/posapp/components/Navbar.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/bus.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/pos/ItemsSelector.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/pos/Customer.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/pos/ItemsCrads.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/pos/Pos.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/Home.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/posapp.js"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// import MyPopup from './MyPopup.vue';\n\nexport default {\n  // components: {MyPopup},\n  data() {\n    return {\n      drawer: true,\n      mini: true,\n      item: 0,\n      items: [\n        { text: \"Dashboard\", icon: \"mdi-view-dashboard\" },\n        { text: \"POS\", icon: \"mdi-point-of-sale\" },\n        { text: \"Customer\", icon: \"mdi-account-box-multiple\" },\n        { text: \"Closing\", icon: \"mdi-folder-open\" },\n      ],\n      page: \"\",\n      fav: true,\n      menu: false,\n      message: false,\n      hints: true,\n    };\n  },\n  methods: {\n    changePage(key) {\n      this.$emit(\"changePage\", key);\n    },\n    go_to() {\n      //  window.location = document.location.href.substring(0,document.location.href.length - 6);\n      frappe.set_route(\"workspace\", \"home\");\n      location.reload();\n    },\n  },\n};\n","export const evntBus = new Vue();","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { evntBus } from \"../../bus\";\nexport default {\n  data: () => ({\n    items_view: \"card\",\n    item_group: \"ALL\",\n    favourites_view: false,\n    loading: false,\n    items_group: [\"ALL\"],\n    items: [],\n    search: \"\",\n    itemsStorageKey: \"items_storage\",\n  }),\n\n  methods: {\n    get_items() {\n      const vm = this;\n      this.loading = true;\n      if (localStorage.items_storage) {\n        vm.items = JSON.parse(localStorage.getItem(\"items_storage\"));\n        vm.loading = false;\n      }\n      frappe.call({\n        method: \"posawesome.posawesome.page.posapp.posapp.get_items\",\n        args: {},\n        callback: function (r) {\n          if (r.message) {\n            const loadItmes = !localStorage.items_storage || (JSON.parse(localStorage.getItem(\"items_storage\")).length != r.message.length)\n            localStorage.setItem(\"items_storage\", \"\");\n            localStorage.setItem(\"items_storage\", JSON.stringify(r.message));\n            if (loadItmes) {\n              vm.$nextTick(() => {\n                console.log(\"loadItmes\",loadItmes)\n                vm.items = JSON.parse(localStorage.getItem(\"items_storage\"));\n                vm.loading = false;\n              });\n            }\n          }\n        },\n      });\n    },\n    add_item(item) {\n      evntBus.$emit(\"add_item\", item);\n    },\n  },\n  computed: {\n    filtred_items() {\n      let filtred_list = [];\n      let filtred_group_list = [];\n      if (this.item_group != \"ALL\") {\n        filtred_group_list = this.items.filter((item) =>\n          item.item_group.toLowerCase().includes(this.item_group.toLowerCase())\n        );\n      } else {\n        filtred_group_list = this.items;\n      }\n      if (!this.search || this.search.length < 3) {\n        return (filtred_list = filtred_group_list.slice(0, 100));\n      } else if (this.search) {\n        filtred_list = filtred_group_list.filter((item) =>\n          item.item_name.toLowerCase().includes(this.search.toLowerCase())\n        );\n        if (filtred_list.length == 0) {\n          filtred_list = filtred_group_list.filter((item) =>\n            item.item_code.toLowerCase().includes(this.search.toLowerCase())\n          );\n        }\n      }\n      return filtred_list.slice(0, 100);\n    },\n  },\n\n  created: function () {\n    this.$nextTick(function () {\n      this.get_items();\n    });\n  },\n  // mounted() {\n  //   if (localStorage.getItem('items_storage')) {\n  //     try {\n  //       this.items = JSON.parse(localStorage.getItem('items_storage'));\n  //     } catch(e) {\n  //       // localStorage.removeItem('cats');\n  //       console.log(e)\n  //     }\n  //   }\n  // },\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data: () => ({\n    cutomers: [\"Cash Customer\", \"foo\", \"bar\", \"fizz\", \"buzz\"],\n    cutomer: \"Cash Customer\",\n  }),\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { evntBus } from \"../../bus\";\nimport Customer from \"./Customer.vue\";\nexport default {\n  props: [\n    // \"items\"\n  ],\n  data() {\n    return {\n      items_discount: 0,\n      additional_discount: 0,\n      total_tax: 0,\n      total: 0,\n      items: [],\n    };\n  },\n  components: {\n    Customer,\n  },\n  computed: {\n    total_qty() {\n      let qty = 0;\n      this.items.forEach((item) => {\n        qty += item.qty;\n      });\n      return qty;\n    },\n    subtotal() {\n      let sum = 0;\n      this.items.forEach((item) => {\n        sum += item.qty * item.price;\n      });\n      return sum;\n    },\n  },\n  methods: {\n    // sortBy(prop) {\n    //   this.projects.sort((a, b) => (a[prop] < b[prop] ? -1 : 1));\n    // },\n    remove_item(item) {\n      const index = this.items.findIndex((el) => el === item);\n      this.items.splice(index, 1);\n    },\n    add_one(item) {\n      item.qty++;\n      // this.$forceUpdate();\n    },\n    subtract_one(item) {\n      item.qty--;\n      if (item.qty <= 0) {\n        this.remove_item(item);\n      }\n      // this.$forceUpdate();\n    },\n    add_item(item) {\n      const index = this.items.findIndex((el) => el.name === item.name);\n      if (index === -1) {\n        const new_item = { ...item };\n        new_item.qty = 1;\n        new_item.vat = 18;\n        new_item.price = 25;\n        (new_item.active = false), this.items.unshift(new_item);\n      } else {\n        this.items[index].qty++;\n      }\n    },\n  },\n  created() {\n    evntBus.$on(\"add_item\", (item) => {\n      this.add_item(item);\n    });\n  },\n  mounted: function () {\n    // this.$nextTick(function () {\n    // const vm = this;\n    //     frappe.call({\n    //         method: 'roxtools.roxtools.doctype.myprojects.myprojects.get_all_projects',\n    //         async: false,\n    //         callback: function(r) {\n    //             if (r.message) {\n    //                 // console.log(r.message);\n    //                 vm.projects = r.message;\n    //             }\n    //         }\n    //     });\n    // })\n    // this.$nextTick(function () {\n    //     const vm = this;\n    //     frappe.realtime.on('rox_add_project', function(data) {\n    //         vm.projects.push(data);\n    //     });\n    // })\n  },\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ItemsSelector from \"./ItemsSelector.vue\";\nimport ItemsCrads from \"./ItemsCrads.vue\";\n\nexport default {\n  data: function () {\n    return {};\n  },\n  components: {\n    ItemsSelector,\n    ItemsCrads,\n  },\n  methods: {},\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Navbar from \"./components/Navbar.vue\";\nimport POS from \"./components/pos/Pos.vue\";\n\nexport default {\n  data: function () {\n    return {\n      page: \"POS\",\n    };\n  },\n  components: {\n    Navbar,\n    POS,\n  },\n  methods: {\n    setPage(page) {\n      this.page = page;\n    },\n  },\n};\n","import Home from './Home.vue';\n\nfrappe.provide('frappe.PosApp');\n\n\nfrappe.PosApp.posapp = class {\n        constructor({ parent }) {\n                this.$parent = $(document);\n                this.page = parent.page;\n                this.make_body();\n                \n        }\n        make_body() {\n                this.$customer_table_container = this.$parent.find('#body_div');\n                this.vue = new Vue({\n                        vuetify: new Vuetify(),\n                        el: this.$customer_table_container[0],\n                        data: {\n                        },\n                        render: h => h(Home),\n                });\n                \n        }       \n        setup_header() {\n                \n        }\n};"],"names":["data","drawer","mini","item","items","text","icon","page","fav","menu","message","hints","methods","changePage","key","this","$emit","go_to","frappe","set_route","location","reload","evntBus","Vue","items_view","item_group","favourites_view","loading","items_group","search","itemsStorageKey","get_items","const","vm","localStorage","items_storage","JSON","parse","getItem","call","method","args","callback","r","loadItmes","length","setItem","stringify","$nextTick","console","log","add_item","computed","filtred_items","filtred_list","filtred_group_list","filter","toLowerCase","includes","slice","item_name","item_code","created","cutomers","cutomer","props","items_discount","additional_discount","total_tax","total","components","total_qty","let","qty","forEach","subtotal","sum","price","remove_item","index","findIndex","el","splice","add_one","subtract_one","name","new_item","Object","vat","active","unshift","$on","mounted","ItemsSelector","Navbar","setPage","provide","PosApp","posapp","[object Object]","ref","$parent","$","document","parent","make_body","$customer_table_container","find","vue","vuetify","Vuetify","render","h","Home"],"mappings":"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"}