{"version":3,"file":"posapp.min.js","sources":["../../../../apps/posawesome/posawesome/public/js/posapp/bus.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/Navbar.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/pos/ItemsSelector.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/pos/Customer.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/pos/Invoice.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/pos/OpeningDialog.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/pos/Payments.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/pos/Drafts.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/pos/ClosingDialog.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/components/pos/Pos.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/Home.vue?rollup-plugin-vue=script.js","../../../../apps/posawesome/posawesome/public/js/posapp/posapp.js"],"sourcesContent":["export const evntBus = new Vue();","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { evntBus } from \"../bus\";\n\nexport default {\n  // components: {MyPopup},\n  data() {\n    return {\n      drawer: true,\n      mini: true,\n      item: 0,\n      items: [\n        { text: \"Dashboard\", icon: \"mdi-view-dashboard\" },\n        { text: \"POS\", icon: \"mdi-point-of-sale\" },\n        { text: \"Customer\", icon: \"mdi-account-box-multiple\" },\n        { text: \"Closing\", icon: \"mdi-folder-open\" },\n      ],\n      page: \"\",\n      fav: true,\n      menu: false,\n      message: false,\n      hints: true,\n      menu_item: 0,\n      snack: false,\n      snackColor: \"\",\n      snackText: \"\",\n    };\n  },\n  methods: {\n    changePage(key) {\n      this.$emit(\"changePage\", key);\n    },\n    go_to() {\n      frappe.set_route(\"workspace\", \"home\");\n      location.reload();\n    },\n    close_shift_dialog() {\n      evntBus.$emit(\"open_closing_dialog\");\n    },\n    show_mesage(data) {\n      this.snack = true;\n      this.snackColor = data.color;\n      this.snackText = data.text;\n    },\n  },\n  created: function () {\n    this.$nextTick(function () {\n      evntBus.$on(\"show_mesage\", (data) => {\n        this.show_mesage(data);\n      });\n    });\n  },\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { evntBus } from \"../../bus\";\n\nexport default {\n  // props: [\"pos_profile\"],\n  data: () => ({\n    pos_profile: \"\",\n    items_view: \"list\",\n    item_group: \"ALL\",\n    favourites_view: false,\n    loading: false,\n    items_group: [\"ALL\"],\n    items: [],\n    search: \"\",\n    itemsPerPage: 1000,\n    items_headers: [\n      { text: \"Name\", align: \"start\", sortable: true, value: \"item_name\" },\n      { text: \"Rate\", value: \"rate\", align: \"start\" },\n      { text: \"Currency\", value: \"currency\", align: \"start\" },\n      { text: \"Available QTY\", value: \"actual_qty\", align: \"start\" },\n      { text: \"UOM\", value: \"stock_uom\", align: \"start\" },\n    ],\n  }),\n\n  watch: {\n    filtred_items(data_value){\n      this.update_items_details(data_value)\n    }\n  },\n\n  methods: {\n    get_items() {\n      if (!this.pos_profile) {\n        console.log(\"No POS Profile\");\n        return;\n      }\n      const vm = this;\n      this.loading = true;\n      if (localStorage.items_storage) {\n        vm.items = JSON.parse(localStorage.getItem(\"items_storage\"));\n        vm.loading = false;\n      }\n      frappe.call({\n        method: \"posawesome.posawesome.api.posapp.get_items\",\n        args: { pos_profile: vm.pos_profile },\n        callback: function (r) {\n          if (r.message) {\n            // const loadItmes =\n            //   !localStorage.items_storage ||\n            //   JSON.parse(localStorage.getItem(\"items_storage\")).length !=\n            //     r.message.length;\n            localStorage.setItem(\"items_storage\", \"\");\n            localStorage.setItem(\"items_storage\", JSON.stringify(r.message));\n            // if (loadItmes) {\n            vm.$nextTick(() => {\n              console.log(\"loadItmes\");\n              vm.items = JSON.parse(localStorage.getItem(\"items_storage\"));\n              vm.loading = false;\n            });\n            // }\n          }\n        },\n      });\n    },\n    get_items_groups() {\n      if (!this.pos_profile) {\n        console.log(\"No POS Profile\");\n        return;\n      }\n      if (this.pos_profile.item_groups.length > 0) {\n        this.pos_profile.item_groups.forEach((element) => {\n          if (element.item_group !== \"All Item Groups\") {\n            this.items_group.push(element.item_group);\n          }\n        });\n      } else {\n        const vm = this;\n        frappe.call({\n          method: \"posawesome.posawesome.api.posapp.get_items_groups\",\n          args: {},\n          callback: function (r) {\n            if (r.message) {\n              r.message.forEach((element) => {\n                vm.items_group.push(element.name);\n              });\n            }\n          },\n        });\n      }\n    },\n    add_item(item) {\n      evntBus.$emit(\"add_item\", item);\n    },\n    enter_event() {\n      if (!this.filtred_items.length || !this.search) {\n        return;\n      }\n      this.add_item(this.filtred_items[0]);\n      this.search = null;\n    },\n    esc_event() {\n      this.search = null;\n    },\n    update_items_details(items) {\n      const vm = this;\n      frappe.call({\n        method: \"posawesome.posawesome.api.posapp.get_items_details\",\n        args: {\n          pos_profile: vm.pos_profile,\n          items_data: items,\n        },\n        callback: function (r) {\n          if (r.message) {\n            items.forEach((item) => {\n              const updated_item = r.message.find(\n                (element) => element.item_code == item.item_code\n              );\n              item.actual_qty = updated_item.actual_qty;\n              item.serial_no_data = updated_item.serial_no_data;\n              item.batch_no_data = updated_item.batch_no_data;\n              item.uoms = updated_item.uoms;\n              item.rate = updated_item.rate;\n              item.currency = updated_item.currency;\n            });\n          }\n        },\n      });\n    },\n    update_cur_items_details(){\n      this.update_items_details(this.filtred_items);\n    },\n  },\n\n  computed: {\n    filtred_items() {\n      let filtred_list = [];\n      let filtred_group_list = [];\n      if (this.item_group != \"ALL\") {\n        filtred_group_list = this.items.filter((item) =>\n          item.item_group.toLowerCase().includes(this.item_group.toLowerCase())\n        );\n      } else {\n        filtred_group_list = this.items;\n      }\n      if (!this.search || this.search.length < 3) {\n        return (filtred_list = filtred_group_list.slice(0, 100));\n      } else if (this.search) {\n        filtred_list = filtred_group_list.filter((item) => {\n          let found = false;\n          for (let element of item.item_barcode) {\n            if (element.barcode == this.search) {\n              found = true;\n              break;\n            }\n          }\n          return found;\n        });\n        if (filtred_list.length == 0) {\n          filtred_list = filtred_group_list.filter((item) =>\n            item.item_name.toLowerCase().includes(this.search.toLowerCase())\n          );\n          if (filtred_list.length == 0) {\n            filtred_list = filtred_group_list.filter((item) =>\n              item.item_code.toLowerCase().includes(this.search.toLowerCase())\n            );\n          }\n        }\n      }\n      return filtred_list.slice(0, 100);\n    },\n  },\n\n  created: function () {\n    this.$nextTick(function () {});\n    evntBus.$on(\"register_pos_profile\", (data) => {\n      this.pos_profile = data.pos_profile;\n      this.get_items();\n      this.get_items_groups();\n    });\n    evntBus.$on(\"update_cur_items_details\", () => {\n      this.update_cur_items_details();\n    });\n  },\n\n  mounted() {},\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { evntBus } from \"../../bus\";\nexport default {\n  data: () => ({\n    pos_profile: \"\",\n    customers: [],\n    customer: \"\",\n  }),\n\n  methods: {\n    get_customer_names() {\n      const vm = this;\n      if (localStorage.customer_storage) {\n        vm.customers = JSON.parse(localStorage.getItem(\"customer_storage\"));\n      }\n\n      frappe.call({\n        method: \"posawesome.posawesome.api.posapp.get_customer_names\",\n        args: {},\n        callback: function (r) {\n          if (r.message) {\n            // const loadCustomers =\n            //   !localStorage.customer_storage ||\n            //   JSON.parse(localStorage.getItem(\"items_storage\")).length !=\n            //     r.message.length;\n            localStorage.setItem(\"customer_storage\", \"\");\n            localStorage.setItem(\"customer_storage\", JSON.stringify(r.message));\n            // if (loadCustomers) {\n            vm.$nextTick(() => {\n              console.log(\"loadCustomers\");\n              vm.customers = JSON.parse(\n                localStorage.getItem(\"customer_storage\")\n              );\n            });\n            // }\n          }\n        },\n      });\n    },\n  },\n  computed: {},\n\n  created: function () {\n    this.$nextTick(function () {\n      evntBus.$on(\"register_pos_profile\", (pos_profile) => {\n        this.pos_profile = pos_profile;\n        this.get_customer_names();\n      });\n      evntBus.$on(\"set_customer\", (customer) => {\n        this.customer = customer;\n      });\n    });\n  },\n\n  watch: {\n    customer() {\n      evntBus.$emit(\"update_customer\", this.customer);\n    },\n  },\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { evntBus } from \"../../bus\";\nimport Customer from \"./Customer.vue\";\nexport default {\n  // props: [\"pos_profile\"],\n  data() {\n    return {\n      pos_profile: \"\",\n      pos_opening_shift: \"\",\n      invoice_doc: \"\",\n      customer: \"\",\n      customer_info: \"\",\n      additional_discount: 0,\n      total_tax: 0,\n      total: 0,\n      items: [],\n      itemsPerPage: 1000,\n      expanded: [],\n      singleExpand: true,\n      items_headers: [\n        {\n          text: \"Name\",\n          align: \"start\",\n          sortable: true,\n          value: \"item_name\",\n        },\n        { text: \"QTY\", value: \"qty\", align: \"center\" },\n        { text: \"UOM\", value: \"stock_uom\", align: \"center\" },\n        { text: \"Rate\", value: \"rate\", align: \"center\" },\n        { text: \"Amount\", value: \"amount\", align: \"center\" },\n      ],\n    };\n  },\n  components: {\n    Customer,\n  },\n  computed: {\n    total_qty() {\n      this.close_payments();\n      let qty = 0;\n      this.items.forEach((item) => {\n        qty += item.qty;\n      });\n      return flt(qty);\n    },\n    subtotal() {\n      this.close_payments();\n      let sum = 0;\n      this.items.forEach((item) => {\n        sum += item.qty * item.rate;\n      });\n      return flt(sum);\n    },\n    total_items_discount_amount() {\n      let sum = 0;\n      this.items.forEach((item) => {\n        sum += item.qty * item.discount_amount;\n      });\n      return flt(sum);\n    },\n  },\n  methods: {\n    remove_item(item) {\n      const index = this.items.findIndex((el) => el === item);\n      this.items.splice(index, 1);\n      const idx = this.expanded.findIndex((el) => el === item);\n      if (idx >= 0) {\n        this.expanded.splice(idx, 1);\n      }\n    },\n    add_one(item) {\n      item.qty++;\n      // this.$forceUpdate();\n    },\n    subtract_one(item) {\n      item.qty--;\n      if (item.qty <= 0) {\n        this.remove_item(item);\n      }\n      // this.$forceUpdate();\n    },\n    add_item(item) {\n      const index = this.items.findIndex(\n        (el) => el.item_code === item.item_code\n      );\n      if (index === -1) {\n        const new_item = { ...item };\n        new_item.qty = 1;\n        new_item.discount_amount = 0;\n        new_item.discount_percentage = 0;\n        item.discount_amount_per_item = 0;\n        new_item.price_list_rate = item.rate;\n        this.items.unshift(new_item);\n        this.update_item_detail(new_item);\n      } else {\n        this.update_items_details([this.items[index]]);\n        this.items[index].qty++;\n        this.items[index].actual_qty = item.actual_qty;\n      }\n    },\n    cancel_invoice() {\n      const doc = this.get_invoice_doc();\n      if (doc.name) {\n        frappe.call({\n          method: \"posawesome.posawesome.api.posapp.delete_invoice\",\n          args: { invoice: doc.name },\n          async: true,\n          callback: function (r) {\n            if (r.message) {\n              evntBus.$emit(\"show_mesage\", {\n                text: r.message,\n                color: \"warning\",\n              });\n            }\n          },\n        });\n      }\n      this.items = [];\n      this.customer = this.pos_profile.customer;\n      this.invoice_doc = \"\";\n    },\n    new_invoice(data = {}) {\n      const doc = this.get_invoice_doc();\n      if (doc.name) {\n        this.update_invoice(doc);\n      } else {\n        if (doc.items.length) {\n          this.save_draft_invoice(doc);\n        }\n      }\n      if (!data.name) {\n        this.items = [];\n        this.customer = this.pos_profile.customer;\n        this.invoice_doc = \"\";\n      } else {\n        this.invoice_doc = data;\n        this.items = data.items;\n        this.customer = data.customer;\n      }\n    },\n    save_draft_invoice() {\n      const vm = this;\n      const doc = this.get_invoice_doc();\n      frappe.call({\n        method: \"posawesome.posawesome.api.posapp.save_draft_invoice\",\n        args: { data: doc },\n        async: false,\n        callback: function (r) {\n          if (r.message) {\n            vm.invoice_doc = r.message;\n          }\n        },\n      });\n      return this.invoice_doc;\n    },\n    get_invoice_doc() {\n      let doc = {};\n      if (this.invoice_doc.name) {\n        doc = { ...this.invoice_doc };\n      }\n      doc.doctype = \"Sales Invoice\";\n      doc.is_pos = 1;\n      doc.company = doc.company || this.pos_profile.company;\n      doc.pos_profile = doc.pos_profile || this.pos_profile.name;\n      doc.currency = doc.currency || this.pos_profile.currency;\n      doc.naming_series = doc.naming_series || this.pos_profile.naming_series;\n      doc.customer = this.customer;\n      doc.items = this.get_invoice_items();\n      doc.total = this.subtotal;\n      (doc.posa_pos_opening_shift = this.pos_opening_shift.name),\n        (doc.payments = doc.payments = this.get_payments()),\n        (doc.taxes = []);\n      return doc;\n    },\n    get_invoice_items() {\n      const items_list = [];\n      this.items.forEach((item) => {\n        items_list.push({\n          item_code: item.item_code,\n          qty: item.qty,\n          rate: item.rate,\n        });\n      });\n      return items_list;\n    },\n    get_payments() {\n      const payments = [];\n      this.pos_profile.payments.forEach((payment) => {\n        payments.push({\n          amount: 0,\n          mode_of_payment: payment.mode_of_payment,\n          default: payment.default,\n          account: \"\",\n        });\n      });\n      return payments;\n    },\n    update_invoice(doc) {\n      const vm = this;\n      frappe.call({\n        method: \"posawesome.posawesome.api.posapp.update_invoice\",\n        args: {\n          data: doc,\n        },\n        async: false,\n        callback: function (r) {\n          if (r.message) {\n            vm.invoice_doc = r.message;\n          }\n        },\n      });\n      return this.invoice_doc;\n    },\n    proces_invoice() {\n      const doc = this.get_invoice_doc();\n      if (doc.name) {\n        return this.update_invoice(doc);\n      } else {\n        return this.save_draft_invoice(doc);\n      }\n    },\n    show_payment() {\n      if (!this.customer) {\n        evntBus.$emit(\"show_mesage\", {\n          text: `There is no Customer !`,\n          color: \"error\",\n        });\n        return;\n      }\n      if (!this.items.length) {\n        evntBus.$emit(\"show_mesage\", {\n          text: `There is no Items !`,\n          color: \"error\",\n        });\n        return;\n      }\n      evntBus.$emit(\"show_payment\", \"true\");\n      const invoice_doc = this.proces_invoice();\n      invoice_doc.customer_info = this.customer_info;\n      evntBus.$emit(\"send_invoice_doc_payment\", invoice_doc);\n    },\n    get_draft_invoices() {\n      const vm = this;\n      frappe.call({\n        method: \"posawesome.posawesome.api.posapp.get_draft_invoices\",\n        args: {\n          pos_opening_shift: this.pos_opening_shift.name,\n        },\n        async: false,\n        callback: function (r) {\n          if (r.message) {\n            evntBus.$emit(\"open_drafts\", r.message);\n          }\n        },\n      });\n    },\n    close_payments() {\n      evntBus.$emit(\"show_payment\", \"false\");\n    },\n    update_items_details(items) {\n      const vm = this;\n      frappe.call({\n        method: \"posawesome.posawesome.api.posapp.get_items_details\",\n        args: {\n          pos_profile: vm.pos_profile,\n          items_data: items,\n        },\n        callback: function (r) {\n          if (r.message) {\n            items.forEach((item) => {\n              const updated_item = r.message.find(\n                (element) => element.item_code == item.item_code\n              );\n              item.actual_qty = updated_item.actual_qty;\n              item.serial_no_data = updated_item.serial_no_data;\n              item.batch_no_data = updated_item.batch_no_data;\n              item.uoms = updated_item.uoms;\n              item.rate = updated_item.rate;\n              item.currency = updated_item.currency;\n            });\n          }\n        },\n      });\n    },\n    update_item_detail(item) {\n      const vm = this;\n      frappe.call({\n        method: \"posawesome.posawesome.api.posapp.get_item_detail\",\n        args: {\n          doc: this.get_invoice_doc(),\n          data: {\n            item_code: item.item_code,\n            customer: this.customer,\n            doctype: \"Sales Invoice\",\n            name: \"New Sales Invoice 1\",\n            company: this.pos_profile.company,\n            conversion_rate: 1,\n            qty: item.qty,\n            price_list_rate: item.price_list_rate,\n            child_docname: \"New Sales Invoice Item 1\",\n            cost_center: this.pos_profile.cost_center,\n            currency: this.pos_profile.currency,\n            plc_conversion_rate: 1,\n            pos_profile: this.pos_profile.name,\n            price_list: this.pos_profile.selling_price_list,\n            stock_uom: item.uom,\n            tax_category: \"\",\n            transaction_type: \"selling\",\n            update_stock: 1,\n          },\n        },\n        callback: function (r) {\n          if (r.message) {\n            const data = r.message;\n            item.discount_amount_on_rate = data.discount_amount_on_rate;\n            item.discount_amount_on_rate = data.discount_amount_on_rate;\n            item.discount_percentage = data.discount_percentage;\n            item.discount_percentage_on_rate = data.discount_percentage_on_rate;\n            item.discount_amount = data.discount_amount || 0;\n            item.has_pricing_rule = data.has_pricing_rule;\n            item.last_purchase_rate = data.last_purchase_rate;\n            item.price_list_rate = data.price_list_rate;\n            item.price_or_product_discount = data.price_or_product_discount;\n            item.pricing_rule_for = data.pricing_rule_for;\n            item.pricing_rules = data.pricing_rules;\n            item.projected_qty = data.projected_qty;\n            item.reserved_qty = data.reserved_qty;\n            item.batch_no = data.batch_no;\n            item.actual_qty = data.actual_qty;\n            vm.calc_item_price(item);\n          }\n        },\n      });\n    },\n    fetch_customer_details() {\n      const vm = this;\n      if (this.customer) {\n        return new Promise((resolve) => {\n          frappe.db\n            .get_value(\"Customer\", vm.customer, [\n              \"email_id\",\n              \"mobile_no\",\n              \"image\",\n              \"loyalty_program\",\n            ])\n            .then(({ message }) => {\n              const { loyalty_program } = message;\n              if (loyalty_program) {\n                frappe.call({\n                  method:\n                    \"erpnext.accounts.doctype.loyalty_program.loyalty_program.get_loyalty_program_details_with_points\",\n                  args: {\n                    customer: vm.customer,\n                    loyalty_program,\n                    silent: true,\n                  },\n                  callback: (r) => {\n                    const { loyalty_points, conversion_factor } = r.message;\n                    if (!r.exc) {\n                      vm.customer_info = {\n                        ...message,\n                        customer: vm.customer,\n                        loyalty_points,\n                        conversion_factor,\n                      };\n                      resolve();\n                    }\n                  },\n                });\n              } else {\n                vm.customer_info = { ...message, customer: vm.customer };\n                resolve();\n              }\n            });\n        });\n      } else {\n        return new Promise((resolve) => {\n          vm.customer_info = {};\n          resolve();\n        });\n      }\n    },\n    calc_prices(item, value, $event) {\n      if (event.target.id === \"rate\") {\n        item.discount_percentage = 0;\n        if (value < item.price_list_rate) {\n          item.discount_amount = flt(item.price_list_rate) - flt(value);\n        } else if (value < 0) {\n          item.rate = item.price_list_rate;\n          item.discount_amount = 0;\n        } else if (value > item.price_list_rate) {\n          item.discount_amount = 0;\n        }\n      } else if (event.target.id === \"discount_amount\") {\n        if (value < 0) {\n          item.discount_amount = 0;\n          item.discount_percentage = 0;\n        } else {\n          item.rate = flt(item.price_list_rate) - flt(value);\n          item.discount_percentage = 0;\n        }\n      } else if (event.target.id === \"discount_percentage\") {\n        if (value < 0) {\n          item.discount_amount = 0;\n          item.discount_percentage = 0;\n        } else {\n          item.rate =\n            flt(item.price_list_rate) -\n            (flt(item.price_list_rate) * flt(value)) / 100;\n          item.discount_amount = flt(item.price_list_rate) - flt(item.rate);\n        }\n      }\n    },\n    calc_item_price(item) {\n      if (!item.has_pricing_rule) {\n        return;\n      }\n      if (item.discount_percentage) {\n        item.rate =\n          flt(item.price_list_rate) -\n          (flt(item.price_list_rate) * flt(item.discount_percentage)) / 100;\n        item.discount_amount = flt(item.price_list_rate) - flt(item.rate);\n        item.discount_amount = flt(item.price_list_rate) - flt(item.rate);\n      } else if (item.discount_amount) {\n        item.rate = flt(item.price_list_rate) - flt(item.discount_amount);\n      } else if (item.pricing_rule_for === \"Rate\") {\n        item.rate = item.price_list_rate;\n      }\n    },\n  },\n  created() {\n    this.$nextTick(function () {});\n    evntBus.$on(\"register_pos_profile\", (data) => {\n      this.pos_profile = data.pos_profile;\n      this.customer = data.pos_profile.customer;\n      this.pos_opening_shift = data.pos_opening_shift;\n    });\n    evntBus.$on(\"add_item\", (item) => {\n      // this.expanded = []\n      this.add_item(item);\n    });\n    evntBus.$on(\"update_customer\", (customer) => {\n      this.customer = customer;\n    });\n    evntBus.$on(\"new_invoice\", () => {\n      this.invoice_doc = \"\";\n      this.cancel_invoice();\n    });\n    evntBus.$on(\"load_invoice\", (data) => {\n      this.new_invoice(data);\n    });\n  },\n  mounted: function () {},\n  watch: {\n    customer() {\n      this.close_payments();\n      evntBus.$emit(\"set_customer\", this.customer);\n      this.fetch_customer_details();\n      // this.get_loyalty();\n    },\n    expanded(data_value) {\n      this.update_items_details(data_value);\n    },\n  },\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { evntBus } from \"../../bus\";\nexport default {\n  props: [\"dialog\"],\n  data: () => ({\n    dialog_data: {},\n    companys: [],\n    company: \"\",\n    pos_profiles_data: [],\n    pos_profiles: [],\n    pos_profile: \"\",\n    payments_method_data: [],\n    payments_methods: [],\n    payments_methods_headers: [\n      {\n        text: \"Mode of Payment\",\n        align: \"start\",\n        sortable: false,\n        value: \"mode_of_payment\",\n      },\n      {\n        text: \"Opening Amount\",\n        value: \"amount\",\n        align: \"center\",\n        sortable: false,\n      },\n    ],\n    itemsPerPage: 100,\n    max25chars: (v) => v.length <= 12 || \"Input too long!\", // TODO : should validate as number\n    pagination: {},\n    snack: false, // TODO : need to remove\n    snackColor: \"\", // TODO : need to remove\n    snackText: \"\", // TODO : need to remove\n  }),\n  watch: {\n    company(val) {\n      this.pos_profiles = [];\n      this.pos_profiles_data.forEach((element) => {\n        if (element.company === val) {\n          this.pos_profiles.push(element.name);\n        }\n        if (this.pos_profiles.length) {\n          this.pos_profile = this.pos_profiles[0];\n        } else {\n          this.pos_profile = \"\";\n        }\n      });\n    },\n    pos_profile(val) {\n      this.payments_methods = [];\n      this.payments_method_data.forEach((element) => {\n        if (element.parent === val) {\n          this.payments_methods.push({\n            mode_of_payment: element.mode_of_payment,\n            amount: 0,\n          });\n        }\n      });\n    },\n  },\n  methods: {\n    close_opening_dialog() {\n      evntBus.$emit(\"close_opening_dialog\");\n    },\n    get_opening_dialog_data() {\n      const vm = this;\n      frappe.call({\n        method: \"posawesome.posawesome.api.posapp.get_opening_dialog_data\",\n        args: {},\n        callback: function (r) {\n          if (r.message) {\n            r.message.companys.forEach((element) => {\n              vm.companys.push(element.name);\n            });\n            vm.company = vm.companys[0];\n            vm.pos_profiles_data = r.message.pos_profiles_data;\n            vm.payments_method_data = r.message.payments_method;\n          }\n        },\n      });\n    },\n    submit_dialog() {\n      if (!this.payments_methods.length || !this.company || !this.pos_profile) {\n        return;\n      }\n      const vm = this;\n      return frappe\n        .call(\"posawesome.posawesome.api.posapp.create_opening_voucher\", {\n          pos_profile: this.pos_profile,\n          company: this.company,\n          balance_details: this.payments_methods,\n        })\n        .then((r) => {\n          if (r.message) {\n            evntBus.$emit(\"register_pos_data\", r.message);\n            vm.close_opening_dialog();\n          }\n        });\n    },\n    save() {\n      // TODO : need to remove\n    },\n    cancel() {\n      // TODO : need to remove\n    },\n    open() {\n      // TODO : need to remove\n    },\n    close() {\n      // TODO : need to remove\n    },\n  },\n  created: function () {\n    this.$nextTick(function () {\n      this.get_opening_dialog_data();\n    });\n  },\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { evntBus } from \"../../bus\";\nexport default {\n  data: () => ({\n    loading: false,\n    pos_profile: \"\",\n    invoice_doc: \"\",\n    loyalty_amount: 0,\n  }),\n\n  methods: {\n    back_to_invoice() {\n      evntBus.$emit(\"show_payment\", \"false\");\n    },\n    submit() {\n      this.submit_invoice();\n      evntBus.$emit(\"new_invoice\", \"false\");\n      this.back_to_invoice();\n    },\n    submit_invoice() {\n      const vm = this;\n      frappe.call({\n        method: \"posawesome.posawesome.api.posapp.submit_invoice\",\n        args: {\n          data: this.invoice_doc,\n          to_submit: \"True\",\n        },\n        async: true,\n        callback: function (r) {\n          if (r.message) {\n            vm.load_print_page();\n            evntBus.$emit(\"show_mesage\", {\n              text: `Invoice ${r.message.name} Submited`,\n              color: \"success\",\n            });\n          }\n        },\n      });\n    },\n    load_print_page() {\n      const letter_head = this.pos_profile.letter_head || 0;\n      const url =\n        frappe.urllib.get_base_url() +\n        \"/printview?doctype=Sales%20Invoice&name=\" +\n        this.invoice_doc.name +\n        \"&format=\" +\n        this.pos_profile.print_format +\n        \"&no_letterhead=\" +\n        letter_head;\n\n      // TODO : need better way for printing\n      const printWindow = window.open(url, \"Print\");\n      printWindow.addEventListener(\n        \"load\",\n        function () {\n          printWindow.print();\n          // printWindow.close();\n          // NOTE : uncomoent this to auto closing printing window\n        },\n        true\n      );\n    },\n  },\n\n  computed: {\n    total_payments() {\n      let total = flt(this.invoice_doc.loyalty_amount);\n      this.invoice_doc.payments.forEach((payment) => {\n        total += flt(payment.amount);\n      });\n      return total;\n    },\n    diff_payment() {\n      return this.invoice_doc.grand_total - this.total_payments;\n    },\n    diff_lable() {\n      let lable = this.diff_payment < 0 ? \"Change\" : \"To Be Paid\";\n      return lable;\n    },\n    available_pioints_amount() {\n      let amount = 0;\n      if (this.invoice_doc.customer_info.loyalty_points) {\n        amount =\n          this.invoice_doc.customer_info.loyalty_points /\n          this.invoice_doc.customer_info.conversion_factor;\n      }\n      return amount;\n    },\n  },\n\n  created: function () {\n    this.$nextTick(function () {\n      evntBus.$on(\"send_invoice_doc_payment\", (invoice_doc) => {\n        this.invoice_doc = invoice_doc;\n        const default_payment = this.invoice_doc.payments.find(\n          (payment) => payment.default == 1\n        );\n        default_payment.amount = invoice_doc.grand_total;\n        this.loyalty_amount = 0;\n      });\n      evntBus.$on(\"register_pos_profile\", (data) => {\n        this.pos_profile = data.pos_profile;\n      });\n    });\n  },\n\n  watch: {\n    loyalty_amount(value) {\n      if (value > this.available_pioints_amount) {\n        this.invoice_doc.loyalty_amount = 0;\n        this.invoice_doc.redeem_loyalty_points = 0;\n        this.invoice_doc.loyalty_points = 0;\n        evntBus.$emit(\"show_mesage\", {\n          text: `Loyalty Amount can not be more then ${this.available_pioints_amount}`,\n          color: \"error\",\n        });\n      } else {\n        this.invoice_doc.loyalty_amount = flt(this.loyalty_amount);\n        this.invoice_doc.redeem_loyalty_points = 1;\n        this.invoice_doc.loyalty_points =\n          flt(this.loyalty_amount) *\n          this.invoice_doc.customer_info.conversion_factor;\n      }\n    },\n  },\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { evntBus } from \"../../bus\";\nexport default {\n  // props: [\"draftsDialog\"],\n  data: () => ({\n    draftsDialog: false,\n    singleSelect: true,\n    selected: [],\n    dialog_data: {},\n    headers: [\n      {\n        text: \"Customer\",\n        value: \"customer\",\n        align: \"start\",\n        sortable: true,\n      },\n      {\n        text: \"Date\",\n        align: \"start\",\n        sortable: true,\n        value: \"posting_date\",\n      },\n      {\n        text: \"Invoice\",\n        value: \"name\",\n        align: \"start\",\n        sortable: true,\n      },\n      {\n        text: \"Amount\",\n        value: \"total\",\n        align: \"start\",\n        sortable: false,\n      },\n    ],\n  }),\n  watch: {},\n  methods: {\n    close_dialog() {\n      this.draftsDialog = false;\n    },\n\n    submit_dialog() {\n      if (this.selected.length > 0) {\n        evntBus.$emit(\"load_invoice\", this.selected[0]);\n        this.draftsDialog = false;\n      }\n    },\n  },\n  created: function () {\n    evntBus.$on(\"open_drafts\", (data) => {\n      this.draftsDialog = true;\n      this.dialog_data = data;\n    });\n  },\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { evntBus } from \"../../bus\";\nexport default {\n  data: () => ({\n    closingDialog: false,\n    itemsPerPage: 20,\n    dialog_data: {},\n    headers: [\n      {\n        text: \"Mode of Payment\",\n        value: \"mode_of_payment\",\n        align: \"start\",\n        sortable: true,\n      },\n      {\n        text: \"Opening Amount\",\n        align: \"end\",\n        sortable: true,\n        value: \"opening_amount\",\n      },\n      {\n        text: \"Closing Amount\",\n        value: \"closing_amount\",\n        align: \"end\",\n        sortable: true,\n      },\n      {\n        text: \"Expected Amount\",\n        value: \"expected_amount\",\n        align: \"end\",\n        sortable: false,\n      },\n      {\n        text: \"Difference\",\n        value: \"difference\",\n        align: \"end\",\n        sortable: false,\n      },\n    ],\n    max25chars: (v) => v.length <= 20 || \"Input too long!\", // TODO : should validate as number\n    pagination: {},\n  }),\n  watch: {},\n  methods: {\n    close_dialog() {\n      this.closingDialog = false;\n    },\n\n    submit_dialog() {\n      evntBus.$emit(\"submit_closing_pos\", this.dialog_data);\n      this.closingDialog = false;\n    },\n  },\n  created: function () {\n    evntBus.$on(\"open_ClosingDialog\", (data) => {\n      this.closingDialog = true;\n      this.dialog_data = data;\n    });\n  },\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { evntBus } from \"../../bus\";\nimport ItemsSelector from \"./ItemsSelector.vue\";\nimport Invoice from \"./Invoice.vue\";\nimport OpeningDialog from \"./OpeningDialog.vue\";\nimport Payments from \"./Payments.vue\";\nimport Drafts from \"./Drafts.vue\";\nimport ClosingDialog from \"./ClosingDialog.vue\";\n\nexport default {\n  data: function () {\n    return {\n      dialog: false,\n      pos_profile: \"\",\n      pos_opening_shift: \"\",\n      payment: false,\n    };\n  },\n\n  components: {\n    ItemsSelector,\n    Invoice,\n    OpeningDialog,\n    Payments,\n    Drafts,\n    ClosingDialog,\n  },\n\n  methods: {\n    check_opening_entry() {\n      return frappe\n        .call(\"posawesome.posawesome.api.posapp.check_opening_shift\", {\n          user: frappe.session.user,\n        })\n        .then((r) => {\n          if (r.message) {\n            this.pos_profile = r.message.pos_profile;\n            this.pos_opening_shift = r.message.pos_opening_shift;\n            evntBus.$emit(\"register_pos_profile\", r.message);\n            console.log(\"LoadPosProfile\");\n          } else {\n            this.create_opening_voucher();\n          }\n        });\n    },\n    create_opening_voucher() {\n      console.log(\"Opening Shift Created\");\n      this.dialog = true;\n    },\n     get_closing_data() {\n      return frappe\n        .call(\"posawesome.posawesome.doctype.pos_closing_shift.pos_closing_shift.make_closing_shift_from_opening\", {\n          opening_shift: this.pos_opening_shift,\n        })\n        .then((r) => {\n          if (r.message) {\n            evntBus.$emit(\"open_ClosingDialog\",r.message);\n          } else {\n            console.log(r)\n          }\n        });\n    },\n    submit_closing_pos(data){\n      frappe\n        .call(\"posawesome.posawesome.doctype.pos_closing_shift.pos_closing_shift.submit_closing_shift\", {\n          closing_shift: data,\n        })\n        .then((r) => {\n          if (r.message) {\n            evntBus.$emit(\"show_mesage\", {\n              text: `POS Shift Closed`,\n              color: \"success\",\n            });\n            this.check_opening_entry()\n          } else {\n            console.log(r)\n          }\n        });\n    },\n  },\n\n  created: function () {\n    this.$nextTick(function () {\n      this.check_opening_entry();\n      evntBus.$on(\"close_opening_dialog\", () => {\n        this.dialog = false;\n      });\n      evntBus.$on(\"register_pos_data\", (data) => {\n        this.pos_profile = data.pos_profile;\n        this.pos_opening_shift = data.pos_opening_shift;\n        evntBus.$emit(\"register_pos_profile\", data);\n        console.log(\"LoadPosProfile\");\n      });\n      evntBus.$on(\"show_payment\", (data) => {\n        this.payment = true ? data ===\"true\": false;\n        evntBus.$emit(\"update_cur_items_details\");\n      })\n      evntBus.$on(\"open_closing_dialog\", () => {\n        this.get_closing_data()\n      })\n      evntBus.$on(\"submit_closing_pos\", (data) => {\n        this.submit_closing_pos(data)\n      })\n    });\n  },\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Navbar from \"./components/Navbar.vue\";\nimport POS from \"./components/pos/Pos.vue\";\n\nexport default {\n  data: function () {\n    return {\n      page: \"POS\",\n    };\n  },\n  components: {\n    Navbar,\n    POS,\n  },\n  methods: {\n    setPage(page) {\n      this.page = page;\n    },\n  },\n};\n","import Home from './Home.vue';\n\nfrappe.provide('frappe.PosApp');\n\n\nfrappe.PosApp.posapp = class {\n        constructor({ parent }) {\n                this.$parent = $(document);\n                this.page = parent.page;\n                this.make_body();\n                \n        }\n        make_body() {\n                this.$customer_table_container = this.$parent.find('#body_div');\n                this.vue = new Vue({\n                        vuetify: new Vuetify(),\n                        el: this.$customer_table_container[0],\n                        data: {\n                        },\n                        render: h => h(Home),\n                });\n                \n        }       \n        setup_header() {\n                \n        }\n};"],"names":["const","evntBus","Vue","data","drawer","mini","item","items","text","icon","page","fav","menu","message","hints","menu_item","snack","snackColor","snackText","methods","changePage","key","this","$emit","go_to","frappe","set_route","location","reload","close_shift_dialog","show_mesage","color","created","$nextTick","$on","pos_profile","items_view","item_group","favourites_view","loading","items_group","search","itemsPerPage","items_headers","align","sortable","value","watch","filtred_items","data_value","update_items_details","get_items","vm","localStorage","items_storage","JSON","parse","getItem","call","method","args","callback","r","setItem","stringify","console","log","get_items_groups","item_groups","length","forEach","element","push","name","add_item","enter_event","esc_event","items_data","updated_item","find","item_code","actual_qty","serial_no_data","batch_no_data","uoms","rate","currency","update_cur_items_details","computed","filtred_list","filtred_group_list","filter","toLowerCase","includes","slice","let","found","item_barcode","barcode","item_name","mounted","customers","customer","get_customer_names","customer_storage","pos_opening_shift","invoice_doc","customer_info","additional_discount","total_tax","total","expanded","singleExpand","components","total_qty","close_payments","qty","flt","subtotal","sum","total_items_discount_amount","discount_amount","remove_item","index","findIndex","el","splice","idx","add_one","subtract_one","new_item","Object","discount_percentage","discount_amount_per_item","price_list_rate","unshift","update_item_detail","cancel_invoice","doc","get_invoice_doc","invoice","async","new_invoice","update_invoice","save_draft_invoice","doctype","is_pos","company","naming_series","get_invoice_items","posa_pos_opening_shift","payments","get_payments","taxes","items_list","payment","amount","mode_of_payment","default","account","proces_invoice","show_payment","get_draft_invoices","conversion_rate","child_docname","cost_center","plc_conversion_rate","price_list","selling_price_list","stock_uom","uom","tax_category","transaction_type","update_stock","discount_amount_on_rate","discount_percentage_on_rate","has_pricing_rule","last_purchase_rate","price_or_product_discount","pricing_rule_for","pricing_rules","projected_qty","reserved_qty","batch_no","calc_item_price","fetch_customer_details","Promise","resolve","db","get_value","then","ref","loyalty_program","silent","exc","loyalty_points","conversion_factor","calc_prices","$event","event","target","id","props","dialog_data","companys","pos_profiles_data","pos_profiles","payments_method_data","payments_methods","payments_methods_headers","max25chars","v","pagination","val","parent","close_opening_dialog","get_opening_dialog_data","payments_method","submit_dialog","balance_details","save","cancel","open","close","loyalty_amount","back_to_invoice","submit","submit_invoice","to_submit","load_print_page","letter_head","url","urllib","get_base_url","print_format","printWindow","window","addEventListener","print","total_payments","diff_payment","grand_total","diff_lable","available_pioints_amount","redeem_loyalty_points","draftsDialog","singleSelect","selected","headers","close_dialog","closingDialog","dialog","ItemsSelector","Invoice","OpeningDialog","Payments","Drafts","check_opening_entry","user","session","create_opening_voucher","get_closing_data","opening_shift","submit_closing_pos","closing_shift","Navbar","setPage","provide","PosApp","posapp","[object Object]","$parent","$","document","make_body","$customer_table_container","vue","vuetify","Vuetify","render","h","Home"],"mappings":"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"}